<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TimeRedeem Kanban - å°å˜€å—’ä»»åŠ¡çœ‹æ¿</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #21262d;
            --border-color: #30363d;
            --text-primary: #e6edf3;
            --text-secondary: #7d8590;
            --accent-blue: #58a6ff;
            --accent-green: #3fb950;
            --accent-yellow: #d29922;
            --accent-purple: #a371f7;
            --accent-red: #f85149;
            --font-mono: 'JetBrains Mono', 'Fira Code', 'SF Mono', Monaco, monospace;
        }

        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap');

        body {
            font-family: var(--font-mono);
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border-color);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 12px;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border: 1px solid var(--border-color);
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-family: var(--font-mono);
            font-size: 12px;
            cursor: pointer;
            border-radius: 6px;
            transition: all 0.2s;
        }

        .btn:hover {
            background: var(--bg-tertiary);
            border-color: var(--accent-blue);
        }

        .btn-danger {
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .btn-danger:hover {
            background: var(--accent-red);
            color: #fff;
        }

        .btn-primary {
            background: var(--accent-blue);
            border-color: var(--accent-blue);
            color: #000;
            font-weight: 600;
        }

        .btn-primary:hover {
            background: #79c0ff;
        }

        .btn-danger {
            border-color: var(--accent-red);
            color: var(--accent-red);
        }

        .btn-danger:hover {
            background: var(--accent-red);
            color: #fff;
        }

        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            font-size: 12px;
        }

        .stat {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            background: var(--bg-secondary);
            border-radius: 4px;
            border: 1px solid var(--border-color);
        }

        .stat-value {
            font-weight: 700;
            color: var(--accent-blue);
        }

        .board {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 20px;
            height: calc(100vh - 180px);
        }

        .column {
            background: var(--bg-secondary);
            border-radius: 12px;
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .column-header {
            padding: 16px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .column-title {
            display: flex;
            align-items: center;
            gap: 8px;
            font-weight: 600;
            font-size: 13px;
        }

        .column-count {
            background: var(--bg-tertiary);
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 11px;
            color: var(--text-secondary);
        }

        .column-backlog .column-title::before {
            content: "ğŸ“‹";
        }

        .column-todo .column-title::before {
            content: "â³";
        }

        .column-progress .column-title::before {
            content: "ğŸ”„";
        }

        .column-done .column-title::before {
            content: "âœ…";
        }

        .column-body {
            flex: 1;
            overflow-y: auto;
            padding: 12px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .column-body.drag-over {
            background: var(--bg-tertiary);
            border: 2px dashed var(--accent-blue);
        }

        .task-card {
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 12px;
            cursor: grab;
            transition: all 0.2s;
            position: relative;
        }

        .task-card:hover {
            border-color: var(--accent-blue);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .task-card.dragging {
            opacity: 0.5;
            cursor: grabbing;
        }

        .task-priority {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 10px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .priority-high {
            background: rgba(248, 81, 73, 0.2);
            color: var(--accent-red);
        }

        .priority-medium {
            background: rgba(210, 153, 34, 0.2);
            color: var(--accent-yellow);
        }

        .priority-low {
            background: rgba(63, 185, 80, 0.2);
            color: var(--accent-green);
        }

        .task-title {
            font-size: 13px;
            line-height: 1.5;
            margin-bottom: 10px;
            word-wrap: break-word;
        }

        .task-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 11px;
            color: var(--text-secondary);
        }

        .task-tags {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
            margin-bottom: 8px;
        }

        .tag {
            padding: 2px 6px;
            background: var(--bg-secondary);
            border-radius: 3px;
            font-size: 10px;
            border: 1px solid var(--border-color);
        }

        .tag-bp { color: var(--accent-blue); }
        .tag-partner { color: var(--accent-purple); }
        .tag-tech { color: var(--accent-green); }
        .tag-product { color: var(--accent-yellow); }
        .tag-ai { color: #ff6b6b; }
        .tag-seedance { color: #4ecdc4; }

        .task-actions {
            display: flex;
            gap: 4px;
        }

        .task-btn {
            padding: 2px 6px;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 11px;
            border-radius: 3px;
            transition: all 0.2s;
        }

        .task-btn:hover {
            background: var(--bg-secondary);
            color: var(--text-primary);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 16px;
            font-weight: 600;
        }

        .modal-close {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 20px;
            cursor: pointer;
        }

        .modal-body {
            padding: 20px;
        }

        .form-group {
            margin-bottom: 16px;
        }

        .form-label {
            display: block;
            margin-bottom: 6px;
            font-size: 12px;
            color: var(--text-secondary);
        }

        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 10px 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-primary);
            font-family: var(--font-mono);
            font-size: 13px;
        }

        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--accent-blue);
        }

        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
            padding: 20px;
            border-top: 1px solid var(--border-color);
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
            font-size: 12px;
        }

        .empty-state-icon {
            font-size: 32px;
            margin-bottom: 10px;
            opacity: 0.5;
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-secondary);
        }

        @media (max-width: 1200px) {
            .board {
                grid-template-columns: repeat(2, 1fr);
                height: auto;
            }
            .column {
                min-height: 400px;
            }
        }

        @media (max-width: 768px) {
            .board {
                grid-template-columns: 1fr;
            }
            .header {
                flex-direction: column;
                gap: 15px;
                align-items: flex-start;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-left">
            <div class="logo">ğŸ’« TimeRedeem Kanban</div>
            <div class="subtitle">å°å˜€å—’ä»»åŠ¡ç®¡ç†ç³»ç»Ÿ</div>
        </div>
        <div class="header-actions">
            <button class="btn" onclick="exportData()">ğŸ“¥ å¯¼å‡º JSON</button>
            <button class="btn" onclick="document.getElementById('import-file').click()">ğŸ“¤ å¯¼å…¥</button>
            <input type="file" id="import-file" accept=".json" style="display:none" onchange="importData(this)">
            <button class="btn btn-danger" onclick="resetData()">ğŸ”„ é‡ç½®æ•°æ®</button>
            <button class="btn btn-primary" onclick="openModal()">+ æ–°å»ºä»»åŠ¡</button>
        </div>
    </div>

    <div class="stats">
        <div class="stat">
            <span>æ€»ä»»åŠ¡:</span>
            <span class="stat-value" id="stat-total">0</span>
        </div>
        <div class="stat">
            <span>è¿›è¡Œä¸­:</span>
            <span class="stat-value" id="stat-progress">0</span>
        </div>
        <div class="stat">
            <span>å·²å®Œæˆ:</span>
            <span class="stat-value" id="stat-done">0</span>
        </div>
        <div class="stat">
            <span>é«˜ä¼˜å…ˆçº§:</span>
            <span class="stat-value" id="stat-high">0</span>
        </div>
    </div>

    <div class="board">
        <div class="column column-backlog" data-status="backlog">
            <div class="column-header">
                <div class="column-title">
                    Backlog
                    <span class="column-count" id="count-backlog">0</span>
                </div>
            </div>
            <div class="column-body" id="backlog" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                <div class="empty-state">
                    <div class="empty-state-icon">ğŸ“‹</div>
                    <div>æš‚æ— å¾…åŠä»»åŠ¡</div>
                </div>
            </div>
        </div>

        <div class="column column-todo" data-status="todo">
            <div class="column-header">
                <div class="column-title">
                    To Do
                    <span class="column-count" id="count-todo">0</span>
                </div>
            </div>
            <div class="column-body" id="todo" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                <div class="empty-state">
                    <div class="empty-state-icon">â³</div>
                    <div>å‡†å¤‡å¼€å§‹çš„ä»»åŠ¡</div>
                </div>
            </div>
        </div>

        <div class="column column-progress" data-status="progress">
            <div class="column-header">
                <div class="column-title">
                    In Progress
                    <span class="column-count" id="count-progress">0</span>
                </div>
            </div>
            <div class="column-body" id="progress" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                <div class="empty-state">
                    <div class="empty-state-icon">ğŸ”„</div>
                    <div>æ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡</div>
                </div>
            </div>
        </div>

        <div class="column column-done" data-status="done">
            <div class="column-header">
                <div class="column-title">
                    Done
                    <span class="column-count" id="count-done">0</span>
                </div>
            </div>
            <div class="column-body" id="done" ondrop="drop(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
                <div class="empty-state">
                    <div class="empty-state-icon">âœ…</div>
                    <div>å·²å®Œæˆçš„ä»»åŠ¡</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal" id="task-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modal-title">æ–°å»ºä»»åŠ¡</div>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="task-id">
                <div class="form-group">
                    <label class="form-label">ä»»åŠ¡æ ‡é¢˜</label>
                    <input type="text" class="form-input" id="task-title" placeholder="è¾“å…¥ä»»åŠ¡æ ‡é¢˜...">
                </div>
                <div class="form-group">
                    <label class="form-label">æè¿°</label>
                    <textarea class="form-textarea" id="task-desc" placeholder="ä»»åŠ¡è¯¦ç»†æè¿°..."></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">ä¼˜å…ˆçº§</label>
                    <select class="form-select" id="task-priority">
                        <option value="high">ğŸ”´ é«˜ä¼˜å…ˆçº§</option>
                        <option value="medium" selected>ğŸŸ¡ ä¸­ä¼˜å…ˆçº§</option>
                        <option value="low">ğŸŸ¢ ä½ä¼˜å…ˆçº§</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">æ ‡ç­¾ (é€—å·åˆ†éš”)</label>
                    <input type="text" class="form-input" id="task-tags" placeholder="BP, åˆä¼™äºº, æŠ€æœ¯, äº§å“...">
                </div>
                <div class="form-group">
                    <label class="form-label">çŠ¶æ€</label>
                    <select class="form-select" id="task-status">
                        <option value="backlog">Backlog</option>
                        <option value="todo">To Do</option>
                        <option value="progress">In Progress</option>
                        <option value="done">Done</option>
                    </select>
                </div>
            </div>
            <div class="form-actions">
                <button class="btn btn-danger" id="delete-btn" style="display:none" onclick="deleteTask()">åˆ é™¤</button>
                <button class="btn" onclick="closeModal()">å–æ¶ˆ</button>
                <button class="btn btn-primary" onclick="saveTask()">ä¿å­˜</button>
            </div>
        </div>
    </div>

    <script>
        // Data storage
        let tasks = JSON.parse(localStorage.getItem('timeredeem-tasks')) || [];
        let draggedTask = null;

        // Initialize with default tasks if empty
        if (tasks.length === 0) {
            tasks = [
                {
                    id: '1',
                    title: 'ã€P0ã€‘BP-Worker: åˆ†æç°æœ‰BPï¼Œç”Ÿæˆä¼˜åŒ–å»ºè®®æŠ¥å‘Š',
                    desc: 'æ·±å…¥åˆ†ææ¡Œé¢ç‚¹æ—¶æˆé‡‘BPæ–‡æ¡£ï¼š\n1. æå–æ ¸å¿ƒå•†ä¸šæ¨¡å¼\n2. è¯†åˆ«æ•°æ®æ›´æ–°ç‚¹\n3. ç”Ÿæˆä¼˜åŒ–å»ºè®®æ¸…å•\n4. åˆ¶ä½œæŠ•èµ„äººExecutive Summary',
                    priority: 'high',
                    tags: ['BP', 'èèµ„', 'P0'],
                    status: 'progress',
                    createdAt: new Date().toISOString()
                },
                {
                    id: '2',
                    title: 'ã€P0ã€‘Legal-Guard: ä¸šåŠ¡æ¨¡å¼åˆè§„é£é™©è¯„ä¼°',
                    desc: 'å…¨é¢è¯„ä¼°ç‚¹æ—¶æˆé‡‘ä¸šåŠ¡æ¨¡å¼çš„æ³•å¾‹é£é™©ï¼š\n1. NFTæƒç›Šè¯åˆ¸åŒ–é£é™©è¯„ä¼°\n2. æ¨èæœºåˆ¶ä¼ é”€é£é™©è¯„ä¼°\n3. æ•°æ®éšç§åˆè§„è¯„ä¼°\n4. ç”Ÿæˆåˆè§„é£é™©è¯„ä¼°æŠ¥å‘Š',
                    priority: 'high',
                    tags: ['åˆè§„', 'æ³•å¾‹', 'P0'],
                    status: 'progress',
                    createdAt: new Date().toISOString()
                },
                {
                    id: '3',
                    title: 'ã€P0ã€‘Partner-Worker: å®Œå–„å…±è¯†èŠ‚ç‚¹å¥–åŠ±è®¡ç®—å…¬å¼',
                    desc: 'è®¾è®¡åˆè§„çš„å¤šçº§æ¨èå¥–åŠ±æœºåˆ¶ï¼š\n1. é¿å…ä¼ é”€æ¨¡å¼è®¾è®¡\n2. å¥–åŠ±è®¡ç®—é€æ˜åŒ–\n3. ä¸Legal-Guardå®¡æ ¸\n4. ç”Ÿæˆå¥–åŠ±è®¡ç®—å·¥å…·',
                    priority: 'high',
                    tags: ['åˆä¼™äºº', 'P0'],
                    status: 'backlog',
                    createdAt: new Date().toISOString()
                },
                {
                    id: '4',
                    title: 'ã€P0ã€‘Launch-Worker: åˆ¶å®šAPPä¸Šçº¿æ£€æŸ¥æ¸…å•',
                    desc: 'ç¡®ä¿3æœˆ1æ—¥é¡ºåˆ©ä¸Šçº¿ï¼š\n1. æŠ€æœ¯æµ‹è¯•æ¸…å•\n2. åˆè§„å®¡æŸ¥æ¸…å•\n3. è¿è¥å‡†å¤‡æ¸…å•\n4. ç«‹ä½“åŒ–å®£ä¼ æ–¹æ¡ˆæ¡†æ¶',
                    priority: 'high',
                    tags: ['APPä¸Šçº¿', 'P0', '3æœˆ1æ—¥'],
                    status: 'progress',
                    createdAt: new Date().toISOString()
                },
                {
                    id: '5',
                    title: 'ã€P0ã€‘Video-Worker: åˆ¶ä½œäº§å“æ¼”ç¤ºè§†é¢‘è„šæœ¬',
                    desc: '3åˆ†é’Ÿäº§å“æ¼”ç¤ºè§†é¢‘ + 5ä¸ªæŠ–éŸ³çŸ­è§†é¢‘è„šæœ¬ï¼š\n1. æ ¸å¿ƒåŠŸèƒ½å±•ç¤º\n2. ç”¨æˆ·åœºæ™¯æ¼”ç»\n3. å“ç‰Œè°ƒæ€§æŠŠæ¡\n4. ä¼ æ’­æ€§ä¼˜åŒ–',
                    priority: 'high',
                    tags: ['è§†é¢‘', 'å®£ä¼ ', 'P0', '3æœˆ1æ—¥'],
                    status: 'backlog',
                    createdAt: new Date().toISOString()
                },
                {
                    id: '6',
                    title: 'ã€P0ã€‘CTO-Worker: APPæœ€ç»ˆæµ‹è¯• & Bugä¿®å¤',
                    desc: 'APPå®Œæˆåº¦90% -> 100%ï¼š\n1. åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•\n2. æ€§èƒ½å‹åŠ›æµ‹è¯•\n3. å®‰å…¨æ¸—é€æµ‹è¯•\n4. Bugä¿®å¤å†²åˆº',
                    priority: 'high',
                    tags: ['æŠ€æœ¯', 'APPä¸Šçº¿', 'P0', '3æœˆ1æ—¥'],
                    status: 'progress',
                    createdAt: new Date().toISOString()
                },
                {
                    id: '7',
                    title: 'ã€P1ã€‘KOL-Worker: ç­›é€‰50äººKOLåˆä½œæ¸…å•',
                    desc: 'ç«‹ä½“åŒ–å®£ä¼ æ ¸å¿ƒï¼š\n1. Web3å¤´éƒ¨KOL (10äºº)\n2. ç”Ÿæ´»æ–¹å¼åšä¸» (20äºº)\n3. è¡Œä¸šä¸“å®¶èƒŒä¹¦ (10äºº)\n4. å‚ç›´é¢†åŸŸè¾¾äºº (10äºº)',
                    priority: 'medium',
                    tags: ['KOL', 'å®£ä¼ ', 'P1', '3æœˆ1æ—¥'],
                    status: 'backlog',
                    createdAt: new Date().toISOString()
                },
                {
                    id: '8',
                    title: 'ã€P1ã€‘PR-Worker: å»ºç«‹100å®¶åª’ä½“è”ç³»æ¸…å•',
                    desc: 'åª’ä½“å…³ç³»å»ºè®¾ï¼š\n1. ç§‘æŠ€åª’ä½“ (30å®¶)\n2. åŒºå—é“¾åª’ä½“ (30å®¶)\n3. ä¼ ç»Ÿåª’ä½“ (20å®¶)\n4. æµ·å¤–åª’ä½“ (20å®¶)',
                    priority: 'medium',
                    tags: ['PR', 'å®£ä¼ ', 'P1', '3æœˆ1æ—¥'],
                    status: 'backlog',
                    createdAt: new Date().toISOString()
                },
                {
                    id: '9',
                    title: 'å¿ƒè·³é¢‘ç‡ä¼˜åŒ–å®Œæˆ',
                    desc: 'å·²å°†å¿ƒè·³é¢‘ç‡ä»30åˆ†é’ŸåŒæ­¥åˆ°45åˆ†é’Ÿï¼Œç§»é™¤äº†æœªé…ç½®çš„Gmail/Calendaræ£€æŸ¥é¡¹',
                    priority: 'medium',
                    tags: ['ç³»ç»Ÿ'],
                    status: 'done',
                    createdAt: new Date().toISOString()
                },
                {
                    id: '10',
                    title: 'ã€P0ã€‘CEOä»»åŠ¡æ¡†æ¶ v2.0 å®Œæˆ',
                    desc: 'å¢åŠ äº†åˆè§„æ¿å— + APPä¸Šçº¿æ¿å— + ç«‹ä½“åŒ–å®£ä¼ èœ‚ç¾¤ï¼š\n1. 7å¤§æ¿å—58é¡¹ä»»åŠ¡\n2. 17ä¸ªèœ‚ç¾¤è§’è‰²å®šä¹‰\n3. 3æœˆ1æ—¥ä¸Šçº¿å€’è®¡æ—¶',
                    priority: 'high',
                    tags: ['ç³»ç»Ÿ', 'P0'],
                    status: 'done',
                    createdAt: new Date().toISOString()
                },
                {
                    id: '11',
                    title: 'ã€P0ã€‘AI-Researcher: è°ƒç ” Seedance API å¼€æ”¾çŠ¶æ€',
                    desc: 'è°ƒç ”å­—èŠ‚è·³åŠ¨ Seedance 2.0 AIè§†é¢‘ç”Ÿæˆå·¥å…·ï¼š\n1. API å¼€æ”¾çŠ¶æ€\n2. æ¥å…¥æ–‡æ¡£å’Œæˆæœ¬\n3. ä¸ç‚¹æ—¶æˆé‡‘ä¸šåŠ¡åœºæ™¯åŒ¹é…åº¦\n4. å•†åŠ¡åˆä½œå¯èƒ½æ€§',
                    priority: 'high',
                    tags: ['AIå·¥å…·', 'Seedance', 'P0'],
                    status: 'progress',
                    createdAt: new Date().toISOString()
                },
                {
                    id: '12',
                    title: 'ã€P0ã€‘AI-Content: åˆ¶ä½œ Seedance æ¼”ç¤ºæ¡ˆä¾‹',
                    desc: 'åˆ©ç”¨ Seedance 2.0 åˆ¶ä½œç‚¹æ—¶æˆé‡‘å®£ä¼ è§†é¢‘ï¼š\n1. äº§å“æ¦‚å¿µè§†é¢‘ (15ç§’)\n2. æ—¶é—´èµ„äº§å±•ç¤ºè§†é¢‘\n3. å¿ƒæ„¿é›†ç»“åœºæ™¯è§†é¢‘\n4. è¯„ä¼°ç”Ÿæˆæ•ˆæœå’Œå•†ä¸šä»·å€¼',
                    priority: 'high',
                    tags: ['AIå·¥å…·', 'Seedance', 'è§†é¢‘', 'P0'],
                    status: 'backlog',
                    createdAt: new Date().toISOString()
                },
                {
                    id: '13',
                    title: 'ã€P0ã€‘äº§å“èœ‚ç¾¤: è®¾è®¡ "AIå¢å¼ºå‹æ—¶é—´èµ„äº§" PRD',
                    desc: 'AI + æ—¶é—´èµ„äº§ç»“åˆçš„äº§å“è®¾è®¡ï¼š\n1. çœŸäººè§†é¢‘ + AIé¢„å‘Šç‰‡ç»„åˆ\n2. æ—¶é—´èƒ¶å›Š AIæœªæ¥è§†é¢‘\n3. å¿ƒæ„¿å®ç° AIå›é¡¾è§†é¢‘\n4. å®šä»·ç­–ç•¥å’Œæº¢ä»·æ¨¡å‹',
                    priority: 'high',
                    tags: ['AIå·¥å…·', 'äº§å“', 'PRD', 'P0'],
                    status: 'backlog',
                    createdAt: new Date().toISOString()
                },
                {
                    id: '14',
                    title: 'ã€P1ã€‘BizDev-Worker: è”ç³»å­—èŠ‚å•†åŠ¡ (åˆä½œæ„å‘)',
                    desc: 'ä¸å­—èŠ‚è·³åŠ¨ Seedance å›¢é˜Ÿå»ºç«‹è”ç³»ï¼š\n1. å‘é€åˆä½œææ¡ˆ\n2. æ¢è®¨ API æ¥å…¥å¯èƒ½æ€§\n3. è”åˆè¥é”€åˆä½œ\n4. æˆä¸ºæ—¶é—´ç»æµé¢†åŸŸæ ‡æ†æ¡ˆä¾‹',
                    priority: 'medium',
                    tags: ['AIå·¥å…·', 'å•†åŠ¡', 'P1'],
                    status: 'backlog',
                    createdAt: new Date().toISOString()
                }
            ];
            saveToStorage();
        }

        function saveToStorage() {
            localStorage.setItem('timeredeem-tasks', JSON.stringify(tasks));
        }

        // Reset data to default tasks
        function resetData() {
            if (confirm('âš ï¸ ç¡®å®šè¦é‡ç½®æ‰€æœ‰ä»»åŠ¡æ•°æ®å—ï¼Ÿ\n\nè¿™å°†æ¸…é™¤å½“å‰æ‰€æœ‰ä»»åŠ¡å¹¶åŠ è½½æœ€æ–°çš„é»˜è®¤ä»»åŠ¡åˆ—è¡¨ï¼ˆåŒ…å«AIç›¸å…³ä»»åŠ¡ï¼‰ã€‚\n\næ­¤æ“ä½œä¸å¯æ’¤é”€ï¼')) {
                localStorage.removeItem('timeredeem-tasks');
                location.reload();
            }
        }

        function renderBoard() {
            const columns = ['backlog', 'todo', 'progress', 'done'];
            const counts = { backlog: 0, todo: 0, progress: 0, done: 0, high: 0 };

            columns.forEach(status => {
                const container = document.getElementById(status);
                const columnTasks = tasks.filter(t => t.status === status);
                counts[status] = columnTasks.length;

                if (columnTasks.length === 0) {
                    container.innerHTML = getEmptyState(status);
                } else {
                    container.innerHTML = columnTasks.map(task => createTaskCard(task)).join('');
                }

                document.getElementById(`count-${status}`).textContent = columnTasks.length;
            });

            // Update stats
            document.getElementById('stat-total').textContent = tasks.length;
            document.getElementById('stat-progress').textContent = counts.progress;
            document.getElementById('stat-done').textContent = counts.done;
            document.getElementById('stat-high').textContent = tasks.filter(t => t.priority === 'high').length;
        }

        function getEmptyState(status) {
            const states = {
                backlog: { icon: 'ğŸ“‹', text: 'æš‚æ— å¾…åŠä»»åŠ¡' },
                todo: { icon: 'â³', text: 'å‡†å¤‡å¼€å§‹çš„ä»»åŠ¡' },
                progress: { icon: 'ğŸ”„', text: 'æ­£åœ¨è¿›è¡Œçš„ä»»åŠ¡' },
                done: { icon: 'âœ…', text: 'å·²å®Œæˆçš„ä»»åŠ¡' }
            };
            return `
                <div class="empty-state">
                    <div class="empty-state-icon">${states[status].icon}</div>
                    <div>${states[status].text}</div>
                </div>
            `;
        }

        function createTaskCard(task) {
            const priorityClass = `priority-${task.priority}`;
            const priorityLabel = { high: 'HIGH', medium: 'MED', low: 'LOW' }[task.priority];
            const tagsHtml = (task.tags || []).map(tag => {
                const tagClass = tag.toLowerCase().includes('bp') ? 'tag-bp' :
                                 tag.toLowerCase().includes('åˆä¼™äºº') ? 'tag-partner' :
                                 tag.toLowerCase().includes('æŠ€æœ¯') ? 'tag-tech' :
                                 tag.toLowerCase().includes('äº§å“') ? 'tag-product' :
                                 tag.toLowerCase().includes('ai') ? 'tag-ai' :
                                 tag.toLowerCase().includes('seedance') ? 'tag-seedance' : '';
                return `<span class="tag ${tagClass}">${tag}</span>`;
            }).join('');

            return `
                <div class="task-card" draggable="true" data-id="${task.id}" ondragstart="drag(event)" onclick="editTask('${task.id}')">
                    <span class="task-priority ${priorityClass}">${priorityLabel}</span>
                    <div class="task-tags">${tagsHtml}</div>
                    <div class="task-title">${escapeHtml(task.title)}</div>
                    <div class="task-meta">
                        <span>${formatDate(task.createdAt)}</span>
                        <div class="task-actions">
                            <button class="task-btn" onclick="event.stopPropagation(); moveTask('${task.id}', 'left')">â†</button>
                            <button class="task-btn" onclick="event.stopPropagation(); moveTask('${task.id}', 'right')">â†’</button>
                        </div>
                    </div>
                </div>
            `;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function formatDate(dateStr) {
            const date = new Date(dateStr);
            return `${date.getMonth() + 1}/${date.getDate()}`;
        }

        // Drag and drop
        function drag(event) {
            draggedTask = event.target.dataset.id;
            event.target.classList.add('dragging');
            event.dataTransfer.effectAllowed = 'move';
        }

        function allowDrop(event) {
            event.preventDefault();
            event.currentTarget.classList.add('drag-over');
        }

        function dragLeave(event) {
            event.currentTarget.classList.remove('drag-over');
        }

        function drop(event) {
            event.preventDefault();
            event.currentTarget.classList.remove('drag-over');
            
            const newStatus = event.currentTarget.id;
            const task = tasks.find(t => t.id === draggedTask);
            
            if (task && task.status !== newStatus) {
                task.status = newStatus;
                saveToStorage();
                renderBoard();
            }
            
            draggedTask = null;
        }

        // Move task with buttons
        function moveTask(taskId, direction) {
            const task = tasks.find(t => t.id === taskId);
            if (!task) return;

            const flow = ['backlog', 'todo', 'progress', 'done'];
            const currentIndex = flow.indexOf(task.status);
            const newIndex = direction === 'left' ? currentIndex - 1 : currentIndex + 1;

            if (newIndex >= 0 && newIndex < flow.length) {
                task.status = flow[newIndex];
                saveToStorage();
                renderBoard();
            }
        }

        // Modal operations
        let editingTaskId = null;

        function openModal() {
            editingTaskId = null;
            document.getElementById('modal-title').textContent = 'æ–°å»ºä»»åŠ¡';
            document.getElementById('task-id').value = '';
            document.getElementById('task-title').value = '';
            document.getElementById('task-desc').value = '';
            document.getElementById('task-priority').value = 'medium';
            document.getElementById('task-tags').value = '';
            document.getElementById('task-status').value = 'backlog';
            document.getElementById('delete-btn').style.display = 'none';
            document.getElementById('task-modal').classList.add('active');
        }

        function editTask(taskId) {
            const task = tasks.find(t => t.id === taskId);
            if (!task) return;

            editingTaskId = taskId;
            document.getElementById('modal-title').textContent = 'ç¼–è¾‘ä»»åŠ¡';
            document.getElementById('task-id').value = task.id;
            document.getElementById('task-title').value = task.title;
            document.getElementById('task-desc').value = task.desc || '';
            document.getElementById('task-priority').value = task.priority;
            document.getElementById('task-tags').value = (task.tags || []).join(', ');
            document.getElementById('task-status').value = task.status;
            document.getElementById('delete-btn').style.display = 'block';
            document.getElementById('task-modal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('task-modal').classList.remove('active');
            editingTaskId = null;
        }

        function saveTask() {
            const title = document.getElementById('task-title').value.trim();
            if (!title) {
                alert('è¯·è¾“å…¥ä»»åŠ¡æ ‡é¢˜');
                return;
            }

            const taskData = {
                title: title,
                desc: document.getElementById('task-desc').value.trim(),
                priority: document.getElementById('task-priority').value,
                tags: document.getElementById('task-tags').value.split(',').map(t => t.trim()).filter(t => t),
                status: document.getElementById('task-status').value
            };

            if (editingTaskId) {
                const task = tasks.find(t => t.id === editingTaskId);
                Object.assign(task, taskData);
            } else {
                tasks.push({
                    id: Date.now().toString(),
                    ...taskData,
                    createdAt: new Date().toISOString()
                });
            }

            saveToStorage();
            renderBoard();
            closeModal();
        }

        function deleteTask() {
            if (!editingTaskId) return;
            
            if (confirm('ç¡®å®šè¦åˆ é™¤è¿™ä¸ªä»»åŠ¡å—ï¼Ÿ')) {
                tasks = tasks.filter(t => t.id !== editingTaskId);
                saveToStorage();
                renderBoard();
                closeModal();
            }
        }

        // Export/Import
        function exportData() {
            const dataStr = JSON.stringify(tasks, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `timeredeem-tasks-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }

        function importData(input) {
            const file = input.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const imported = JSON.parse(e.target.result);
                    if (Array.isArray(imported)) {
                        tasks = imported;
                        saveToStorage();
                        renderBoard();
                        alert('å¯¼å…¥æˆåŠŸï¼');
                    } else {
                        alert('æ–‡ä»¶æ ¼å¼é”™è¯¯');
                    }
                } catch (err) {
                    alert('å¯¼å…¥å¤±è´¥: ' + err.message);
                }
            };
            reader.readAsText(file);
            input.value = '';
        }

        // Close modal on outside click
        document.getElementById('task-modal').addEventListener('click', function(e) {
            if (e.target === this) closeModal();
        });

        // Initialize
        renderBoard();
    </script>
</body>
</html>
