(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[98],{4345:(e,s,t)=>{Promise.resolve().then(t.bind(t,9394))},6707:(e,s,t)=>{"use strict";t.d(s,{A:()=>n,AuthProvider:()=>c});var a=t(5155),l=t(2115);let r=(0,l.createContext)(void 0),n=()=>{let e=(0,l.useContext)(r);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},c=e=>{let{children:s}=e,[t,n]=(0,l.useState)(!1),[c,d]=(0,l.useState)(""),[i,x]=(0,l.useState)(null),[o,m]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{(async()=>{let e=localStorage.getItem("lac_token");if(!e)return m(!1);try{let s=await fetch("".concat("https://ygfprjmevukjzwaqlblf.supabase.co","/functions/v1/user-profile"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(s.ok){let t=await s.json();n(!0),d(t.username||"用户"),x(e)}else localStorage.removeItem("lac_token"),n(!1)}catch(e){n(!1)}finally{m(!1)}})()},[]),(0,a.jsx)(r.Provider,{value:{isLoggedIn:t,username:c,token:i,login:(e,s)=>{localStorage.setItem("lac_token",e),x(e),d(s),n(!0)},logout:()=>{localStorage.removeItem("lac_token"),x(null),d(""),n(!1)},loading:o},children:s})}},9394:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var a=t(5155),l=t(2115),r=t(2619),n=t.n(r),c=t(6707);let d=[{rank:1,name:"CryptoMaster",streak:45,color:"bg-amber-400"},{rank:2,name:"AILearner99",streak:38,color:"bg-blue-400"},{rank:3,name:"Web3Explorer",streak:32,color:"bg-green-400"},{rank:4,name:"DeFiNinja",streak:28,color:"bg-purple-400"},{rank:5,name:"BlockBuilder",streak:21,color:"bg-pink-400"}],i=["日","一","二","三","四","五","六"],x=[{days:1,multiplier:"1x",bonus:0,icon:"\uD83C\uDF31",label:"首日签到",desc:"基础奖励"},{days:2,multiplier:"1x",bonus:2,icon:"\uD83C\uDF3F",label:"连续2天",desc:"+2 LAC"},{days:3,multiplier:"1.1x",bonus:5,icon:"\uD83C\uDF40",label:"连续3天",desc:"1.1倍 +5 LAC"},{days:5,multiplier:"1.2x",bonus:10,icon:"\uD83C\uDF33",label:"连续5天",desc:"1.2倍 +10 LAC"},{days:7,multiplier:"1.3x",bonus:20,icon:"\uD83D\uDD25",label:"连续7天",desc:"1.3倍 +20 LAC"},{days:14,multiplier:"1.4x",bonus:50,icon:"\uD83D\uDC8E",label:"连续14天",desc:"1.4倍 +50 LAC"},{days:30,multiplier:"1.5x",bonus:100,icon:"\uD83D\uDC51",label:"连续30天",desc:"1.5倍 +100 LAC"}];function o(){let{isLoggedIn:e,token:s}=(0,c.A)(),[t,r]=(0,l.useState)(""),[o,m]=(0,l.useState)(!1),[h,u]=(0,l.useState)(!1),[b,g]=(0,l.useState)({}),p=function(){let e=new Date,s=e.getFullYear(),t=e.getMonth(),a=new Date(s,t,1).getDay(),l=new Date(s,t+1,0).getDate(),r=e.getDate(),n=new Set([1,2,3,5,6,7,8,10,11,13,14,15,17,18,20]),c=[];for(let e=0;e<a;e++)c.push({day:0,checked:!1,isToday:!1,empty:!0});for(let e=1;e<=l;e++)c.push({day:e,checked:e<r&&n.has(e),isToday:e===r,empty:!1});return{days:c,monthName:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][t],year:s}}(),j=async()=>{if(t.trim()&&s){u(!0);try{let e=await fetch("".concat("https://ygfprjmevukjzwaqlblf.supabase.co","/functions/v1/mining-checkin"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},body:JSON.stringify({answer:t.trim()})}),a=await e.json();e.ok?(g({feedback:a.feedback,reward:a.reward||10}),m(!0)):g({error:a.error||"签到失败，请稍后重试"})}catch(e){g({error:"网络错误，请稍后重试"})}finally{u(!1)}}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("section",{className:"pt-32 pb-16 lg:pb-20 bg-gradient-to-b from-white to-surface",children:(0,a.jsxs)("div",{className:"max-w-[1200px] mx-auto px-6 text-center",children:[(0,a.jsx)("span",{className:"section-label justify-center",children:"Daily Check-in"}),(0,a.jsx)("h1",{className:"text-4xl lg:text-[56px] font-black text-navy leading-[1.1] mb-6 tracking-tight",children:"每日AI签到"}),(0,a.jsx)("p",{className:"text-lg text-gray-500 max-w-[680px] mx-auto leading-relaxed",children:"回答AI问题，获取LAC奖励"})]})}),(0,a.jsx)("section",{className:"py-12 lg:py-16",children:(0,a.jsx)("div",{className:"max-w-[1200px] mx-auto px-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,a.jsxs)("div",{className:"card p-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gold/10 flex items-center justify-center text-xl",children:"\uD83E\uDDE0"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-navy",children:"今日AI问题"})]}),(0,a.jsx)("div",{className:"bg-surface rounded-2xl p-6 mb-6",children:(0,a.jsx)("p",{className:"text-lg text-navy font-medium leading-relaxed",children:"“什么是大语言模型（LLM）？请用一句话解释。”"})}),e?o?(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"text-4xl mb-3",children:"\uD83C\uDF89"}),(0,a.jsx)("div",{className:"text-lg font-bold text-green-700 mb-1",children:"签到成功！"}),(0,a.jsxs)("div",{className:"text-sm text-green-600",children:["+",b.reward," LAC 已到账"]})]}),b.feedback&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border-l-4 border-gold",children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-navy mb-2",children:"AI 反馈："}),(0,a.jsx)("div",{className:"text-sm text-gray-600 leading-relaxed",children:b.feedback})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("textarea",{value:t,onChange:e=>r(e.target.value),placeholder:"请输入你的回答...",className:"w-full h-32 p-4 rounded-2xl border border-[#E8EAF0] bg-white text-sm text-navy placeholder:text-gray-400 focus:outline-none focus:border-gold focus:ring-2 focus:ring-gold/20 resize-none transition-all duration-200",disabled:h}),b.error&&(0,a.jsx)("div",{className:"mt-4 text-red-500 text-sm bg-red-50 px-4 py-3 rounded-xl",children:b.error}),(0,a.jsx)("button",{onClick:j,disabled:!t.trim()||h,className:"btn btn-primary btn-lg mt-4",children:h?"提交中...":"✅ 提交签到"})]}):(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-2xl p-6 text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-3",children:"\uD83D\uDD10"}),(0,a.jsx)("div",{className:"text-lg font-bold text-yellow-700 mb-2",children:"请先登录"}),(0,a.jsx)("div",{className:"text-sm text-yellow-600 mb-4",children:"登录后即可参与每日签到获取LAC奖励"}),(0,a.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,a.jsx)(n(),{href:"/login",className:"btn btn-primary btn-sm",children:"登录"}),(0,a.jsx)(n(),{href:"/register",className:"btn btn-secondary btn-sm",children:"注册"})]})]})]}),(0,a.jsxs)("div",{className:"card p-8",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-navy mb-6",children:["\uD83D\uDCC5 签到日历 — ",p.year,"年",p.monthName]}),(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[i.map(e=>(0,a.jsx)("div",{className:"text-center text-xs font-semibold text-gray-400 pb-2",children:e},e)),p.days.map((e,s)=>(0,a.jsx)("div",{className:"aspect-square rounded-xl flex flex-col items-center justify-center text-sm transition-all duration-200 ".concat(e.empty?"":e.isToday?"bg-navy text-white font-bold":e.checked?"bg-surface text-navy font-medium":"text-gray-400"),children:!e.empty&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:e.day}),e.checked&&(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 mt-0.5"})]})},s))]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-5",children:"签到统计"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"\uD83D\uDD25 连续签到"}),(0,a.jsx)("span",{className:"text-xl font-black text-navy",children:"7 天"})]}),(0,a.jsx)("div",{className:"h-px bg-[#E8EAF0]"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"\uD83D\uDCC5 本月已签到"}),(0,a.jsx)("span",{className:"text-xl font-black text-navy",children:"15 天"})]}),(0,a.jsx)("div",{className:"h-px bg-[#E8EAF0]"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"\uD83D\uDCB0 累计获得"}),(0,a.jsx)("span",{className:"text-xl font-black gold-text",children:"350 LAC"})]})]})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-5",children:"\uD83C\uDFAE 连续签到奖励"}),(0,a.jsx)("div",{className:"space-y-3",children:x.map((e,s)=>{let t=7>=e.days;return(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl border transition-all ".concat(t?"border-gold/30 bg-gold/[0.04]":"border-[#E8EAF0] bg-white"),children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-xl flex-shrink-0 ".concat(t?"bg-gold/10":"bg-gray-50"),children:t?e.icon:"\uD83D\uDD12"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-semibold ".concat(t?"text-navy":"text-gray-400"),children:e.label}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:e.desc})]}),(0,a.jsx)("div",{className:"text-xs font-bold px-2 py-1 rounded-lg ".concat(t?"bg-gold/10 text-gold":"bg-gray-50 text-gray-300"),children:t?"✅":"".concat(e.days,"天")})]},e.days)})}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[(0,a.jsx)("span",{children:"当前连续 7 天"}),(0,a.jsx)("span",{children:"下一档：14天"})]}),(0,a.jsx)("div",{className:"h-2 rounded-full bg-[#E8EAF0] overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-gold to-gold-light rounded-full",style:{width:"50%"}})})]})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-5",children:"\uD83C\uDFC6 签到排行榜"}),(0,a.jsx)("div",{className:"space-y-3",children:d.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-sm font-bold text-gray-300 w-5 text-center",children:e.rank}),(0,a.jsx)("div",{className:"w-8 h-8 rounded-full ".concat(e.color," flex items-center justify-center text-white text-xs font-bold"),children:e.name.charAt(0)}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("div",{className:"text-sm font-medium text-navy truncate",children:e.name})}),(0,a.jsxs)("span",{className:"text-xs font-semibold text-gold",children:[e.streak,"天"]})]},e.rank))})]})]})]})})})]})}}},e=>{e.O(0,[619,441,493,358],()=>e(e.s=4345)),_N_E=e.O()}]);