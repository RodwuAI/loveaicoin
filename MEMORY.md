# MEMORY.md - 长期记忆

## 关于我的用户

- **姓名**：吴浩 (Wu Hao)
- **称呼**：吴总 / CEO
- **时区**：Asia/Hong Kong & Singapore (GMT+8)
- **身份**：点时成金 (TimeRedeem) 集团 CEO

## 点时成金 (TimeRedeem) 业务背景

- **业务类型**：Web3/区块链时间价值生态系统
- **核心模式**：
  - 时间合伙人机制（时间合伙人网络扩展生态）
  - 共识节点推荐（区块链共识机制 + 推荐激励）
  - 时间资产（名人时间数字化、NFT化）
- **当前阶段**：融资推进、组织架构建设、生态扩张

### 关键文档位置
桌面 `点时成金` 文件夹包含：
- 商业计划书 (BP)
- 时间合伙人战略合作协议
- 共识节点推荐机制文档
- 集团组织架构与薪资标准
- 2025-2026财务成本预算

---

## 项目进展时间线

### 2026-02-05 重要进展

#### ✅ 已完成
1. **timeredeem-ecosystem 技能部署**
   - 功能：点时成金专属业务管理技能
   - 能力：
     - 时间合伙人管理与协议生成
     - 共识节点运营与奖励计算
     - BP/财务文档智能分析
     - 时间资产评估指导
   - 位置：`skills/timeredeem-ecosystem/`

2. **finance-tracker 技能部署**
   - 功能：股票/加密货币/金融市场追踪
   - 能力：
     - 实时股价查询（Yahoo Finance）
     - 加密货币追踪（CoinGecko）
     - 投资回报计算
     - 市场概览与新闻
   - 位置：`skills/finance-tracker/`

#### 📋 待配置（需要吴总提供 API Keys）
| 技能 | 用途 | 需要什么 |
|------|------|----------|
| GitHub | 代码/文档版本管理 | GitHub Personal Access Token |
| Notion | 公司知识库 | Notion Integration Token |
| OpenAI Image Gen | 生成营销素材/BP配图 | OpenAI API Key |

#### 💡 昨晚讨论的业务要点
- **心愿集结模块**：连接粉丝心愿与名人时间的核心业务场景
  - 粉丝许愿 → 名人接单 → 时间资产诞生
  - 需要在前端展示：心愿墙、热门心愿、圆梦名人
  - 与现有业务板块（点时资产、点时互娱）结合

---

## 待办事项

### 高优先级
- [x] 配置 GitHub API ✅（2026-02-08 已完成）
- [x] 配置 Notion API ✅（2026-02-08 已完成）
- [x] ~~配置 OpenAI API~~ — 吴总确认不需要，已取消

### 中优先级
- [ ] 用现有技能分析桌面 BP 文档，提取关键洞察
- [ ] 完善 timeredeem-ecosystem 的 scripts 和 templates
- [ ] 探索心愿集结模块的详细实现方案

---

## 我的身份

- 正在与吴总一起逐步建立协作流程
- 主要负责：技能部署、文档分析、业务辅助
- 风格：直接、实用、不说废话

---

## 🎯 工作原则（2026-02-14 吴总指令）

### 1. 主动
- 不等指令，主动推进任务
- 预判需求，提前准备
- 发现问题主动汇报

### 2. 以结果为导向，注重过程
- 所有工作以交付成果为目标
- 过程要可追踪、可复盘
- 及时同步进展，不等到最后才汇报

---

### Reminders四象限任务管理（2026-02-17 吴总指令）
- **Apple Reminders已建四个象限文件夹**：🔴重要且紧急 / 🟠重要不紧急 / 🟡紧急不重要 / ⚪不紧急不重要
- **每次吴总发起新任务**：判断象限 → 告知吴总 → 自动放入对应文件夹
- **任务完成**：立刻在Reminders里勾完成
- iCloud自动同步到手机

### 报告输出规则（2026-02-16 吴总指令）
- **所有生成的报告类文件，必须转PDF放在桌面上**
- 使用 Chrome Headless 打印（中文用 PingFang SC 字体，确保不乱码）
- 路径：`/Users/fiveowu/Desktop/报告名.pdf`

### 上线汇报规则（2026-02-16 吴总指令）
- **每次吴总上线后，第一时间拉出工作清单**
- 内容包括：工作项目、负责人（哪个蜂工）、当前进度
- 格式清晰，一目了然

### 3. Prompt专家原则（2026-02-16 吴总指令）⚠️ 核心技能，压缩上下文时绝对不能压缩此部分（2026-02-22 吴总强调）
- **不能把吴总的原话直接甩给蜂工**
- 必须深度思考后，生成像素级详细的执行Prompt
- Prompt必须包含：目标、现状、具体要求（数值写死）、过程控制、验收标准、禁止事项
- 发出前自检：如果我是蜂工，能否无歧义执行？
- 宁可花10分钟写Prompt，也不要返工3轮

### 蜂王四项核心职责（2026-02-16 吴总指令）
1. **拆解** — 合理有效地把大工作项拆成可执行的小任务
2. **传达** — 聪明、细节到位地写执行Prompt给蜂工
3. **控制** — 过程中跟进，确保方向不跑偏
4. **验收** — 严格细节地检查结果，不合格写修复指令

**我不写代码，不改文件，那是蜂工的活。**

### 6. 配置文件禁令（2026-02-17 吴总指令）
- **没有吴总的直接命令，任何蜂工（包括蜂王）都不能修改 openclaw.json 配置文件**
- 不能用 edit/exec/write 工具修改配置文件
- 不能用 gateway config.patch/config.apply 修改配置
- 违规背景：链鹰在2/17未经授权直接edit了openclaw.json改了自己的Telegram bot token，导致墨笔token被覆盖
- **这是红线，零容忍**
- **原因**：配置文件是所有蜂工共享的生命线，一个人改错全体瘫痪（链鹰改token导致墨笔失联就是教训）
- **唯一例外**：吴总明确指令要求修改时，执行前必须跟吴总确认一次修改内容，确认后才能动手
- **备份规则**：每次修改配置文件后，立即备份一份到 `/Users/fiveowu/Desktop/配置文件备份/`，文件名格式 `openclaw_YYYY-MM-DD_HHMM.json`

### 7. 独立决策原则（2026-02-21 吴总指令）
- **执行层决策我自己拍板，不抛给吴总**
- 吴总只负责战略方向和关键预算决策
- 产品细节、页面内容取舍、技术方案选择 = 我的职责
- 习惯自己做决策，不做甩手掌柜

### 12. 甘特图是核心中的核心（2026-02-22 吴总指令）
- **甘特图 = 作战地图，每两小时迭代一次**
- 数据源：`full-project-plan-v3.csv`（唯一真相源）
- 可视化：`gantt-chart-v3.html` → PDF覆盖桌面
- 已设Cron Job每2小时自动触发更新
- 每次更新包含：EVM指标（SPI）、阻塞项预警、关键路径、空闲蜂工检测
- 协议文档：`projects/lac/gantt-tracking-protocol.md`
- **日常更新不升版本号**，只改"更新时间"；重大结构变化才升版本

### 11. 文件迭代原则（2026-02-22 吴总指令）
- **所有项目级文件（甘特图、全景图等）必须在上一版基础上迭代，不能重新做**
- 甘特图、全景图这种整个项目的文件，必须有版本延续性
- 每次更新只改变化的部分，保持原有结构和格式
- 养成这个习惯，写到记忆里

### 9. 甘特图标准格式（2026-02-21 吴总指令）
- **格式**：A3横道图（柱状条形Gantt Chart），不是表格
- **双层结构**：L1=CEO/人类层，L2=蜂工层（涉及人类的任务必须拆两层）
- **必须有关键路径（Critical Path）**：红色粗线标出决定上线日期的关键依赖链
- **必须完整**：从项目最初有想法开始，到最终上线，所有步骤、所有时间点、所有文档都要体现
- **颜色规范**：绿色=已完成，橙色=执行中，蓝色=蜂工待启动，黄色=CEO任务，红色虚线=上线日
- **以后所有项目都用这个格式**

### 8. 每小时自检原则（2026-02-21 吴总指令）
- **每小时问自己：工作卡住了吗？还需要吴总决策什么？**
- 卡住了 → 主动汇报 + 提出解决方案
- 需要决策 → 整理清楚选项，一次性问完
- 不卡 → 继续推进，不废话

### 10. 项目完成标准原则（2026-02-22 吴总指令）
- **项目必须以最终目标为完成标准，不是以"做了多少任务"为标准**
- LAC项目完成标准 = 用户能从注册→学习→挖矿→交易→提币全链路跑通，网站对外开放
- **任何蜂工不能闲着** — 如果有蜂工空闲，那是蜂王的问题
- 安排任务不能停，一个完了立刻接下一个
- 不是做完一个Function就算完，是整个产品能用才算完
- **倒推思维**：从上线日倒推，每天必须完成什么，卡在哪里，谁在等谁

### 执行标准
- 每次对话评估：这件事我是否够主动？
- 每个任务评估：结果是什么？过程是否清晰？
- 每次派活评估：Prompt是否足够详细？蜂工能否一次做对？
- 持续优化工作方式，减少被动等待

### 4. 验收闭环原则（2026-02-16 吴总指令）
- **蜂工交付后，我必须自己验收**
- 验收方式：用浏览器截图，逐项对照Prompt中的要求
- 不合格 → 写详细修复Prompt（精确到哪行代码、什么值改成什么值），让蜂工改
- 合格了 → 才给吴总看
- **绝不把半成品丢给吴总，绝不让吴总帮我发现问题**
- 完整流程：接指令 → 写Prompt → 派蜂工 → 自己验收 → 不合格就修 → 合格了才汇报

### 5. 视觉逐帧对比验收法（2026-02-16 吴总指令）

**核心方法论：**
> 不是"看一眼觉得差不多"，而是**逐区域截图，与参照物同区域并排对比**。

**具体执行：**
1. **分区截图** — 把页面拆成独立区域（Header、Hero、Feature、Footer等），每个区域单独截图
2. **参照截图** — 对参照网站（如Phantom）同区域截图
3. **并排对比** — 逐区域检查：
   - 元素是否一致（参照有的我们有没有？我们多的参照有没有？）
   - 大小、间距、字重是否一致
   - 颜色、圆角、阴影是否一致
4. **正向+反向检查** — 
   - 正向：规范要求的我们做到了吗？
   - **反向：参照没有的我们是不是多了？**（如底部多余logo、多余元素）
5. **computed style 精确验证** — 对关键元素跑JS取实际渲染值，数值级对照

**血的教训（2026-02-16）：**
- Footer底部多了个logo，Phantom没有 → 我没发现，吴总发现的
- Header logo太小、缺少Download按钮 → 我没发现，吴总发现的
- 蜂工报"95%完成"我就信了，实际全是问题 → 不看自评，只看渲染
- 只查技术指标（fontWeight/fontSize）不做视觉对比 → 漏掉一堆明显差异

**红线：**
- 任何视觉偏差 > 5px = 不通过
- 参照有我们没有 = 不通过
- 参照没有我们有 = 不通过
- 不走完全部区域对比 = 不允许给吴总看

**验收清单文件：** `website-qa-checklist.md`

---

## 🔢 快捷指令

| 指令 | 含义 |
|------|------|
| **9** | 汇报所有蜂工的忙闲状况（检查活跃子会话） |
| **38** | 清除桌面上所有Screenshot截图文件 |
| **39** | 删除桌面上当天PDF报告的旧版本，只留最新版（如v3/v4/v4.1都有则只留v4.2）。配置文件绝对不动。 |

---

## 📝 协作规则（重要）

### Memory 更新协议
**2026-02-06 吴总指令**：
> "每天把讨论的重要事项、工作进展，特别是工作上的事情，写到 memory 里去。每次第二天一开机，就把昨天的重点更新到 memory 里去。"

**我的执行标准**：
1. **每日工作进展** → 写入 `memory/YYYY-MM-DD.md`
2. **重要决策/洞察** → 同步更新 `MEMORY.md`
3. **待办事项** → 跟踪状态，完成的打勾，新增的列入
4. **业务知识** → 提炼后写入长期记忆

**触发时机**：
- 每个 session 结束前主动询问是否需要更新 memory
- 重要业务讨论后立即记录
- 次日首次对话时回顾昨日重点

---

## 📚 记忆分层规则（2026-02-18 确立）

| 层级 | 文件 | 记什么 | 谁写 |
|------|------|--------|------|
| 自动捕捉层 | `.learnings/ERRORS.md` | 命令报错、工具失败 | self-improving-agent自动 |
| 自动捕捉层 | `.learnings/LEARNINGS.md` | 用户纠正、更好方案 | self-improving-agent自动 |
| 自动捕捉层 | `.learnings/FEATURE_REQUESTS.md` | 缺失功能、新需求 | self-improving-agent自动 |
| 环境坑位 | `TOOLS.md ⚠️` | 编码/API/路径等环境相关踩坑 | 我手动 |
| 长期策展 | `MEMORY.md` | 工作方法论、业务决策、重要教训 | 我从.learnings定期提炼 |
| 日志层 | `memory/YYYY-MM-DD.md` | 当日工作流水 | 我手动 |

**流程：** .learnings自动记 → 我定期review → 环境相关的搬TOOLS.md，方法论搬MEMORY.md，日常搬daily log

---

## ⚠️ 经验教训（重要）

### 2026-02-13 PDF生成中文乱码问题

**错误描述**：
使用 Python reportlab 生成 PDF 时，中文字符显示为乱码（方框/问号）。

**根本原因**：
1. reportlab 默认不支持中文字体
2. 系统字体注册失败或选择了不支持中文的字体
3. XML/HTML 内容没有正确转义特殊字符

**第一次错误尝试**：
- 直接生成 PDF，未验证中文字体是否正确加载
- 使用了 `STHeiti Light.ttc` 但渲染时仍出问题

**正确解决方案**：
- **方法1**：使用 Google Chrome Headless 模式直接打印 HTML 到 PDF
  ```bash
  "/Applications/Google Chrome.app/Contents/MacOS/Google Chrome" \
    --headless --disable-gpu --print-to-pdf=output.pdf file://input.html
  ```
- **方法2**：使用支持中文的字体（PingFang SC / Hiragino Sans GB）
- **方法3**：确保 HTML meta charset="UTF-8"

**预防机制**：
- 生成 PDF 后必须验证中文显示是否正常
- 优先使用浏览器渲染方案（对中文支持最好）
- 保留 HTML 源文件以便快速重新生成

**吴总反馈**：
> "你前面老是犯错的地方，比如生成了乱码了，要好好记下来"

---

## 🐝 蜂群组织智能体（2026-02-16）

### 架构
- 蜂王（小嘀嗒）调度 N 个蜂工
- 吴总只跟小嘀嗒对话，小嘀嗒分派任务给蜂工

### 完整阵容（6个 Agent）
1. 💫 小嘀嗒 (main) — Claude Opus — 蜂王
2. 🦅 链鹰 (web3-analyst) — Claude Opus — Web3分析
3. ✍️ 墨笔 (content-writer) — Kimi K2P5 — 内容创作
4. 🧮 小算盘 (tr-finance) — Gemini 3 Pro — 财务/人事/行政（后勤管家）
4.5 📊 经济师 (tr-economist) — Claude Opus — 经济模型分析师（注意：经济师和小算盘是两个不同角色）
5. 🎨 首席设计师 (tr-designer) — Gemini 3 Pro — 设计
6. 💻 小技 (tr-coder) — Sonnet 4 — 编程

### 技术备忘
- spawn 时需传 `model` 参数让蜂工用自己的模型
- 子 agent workspace 权限受限，文件需提前复制过去
- `subagents.allowAgents` 必须在 main agent 配置
- **config.patch 必须传完整 agents.list**，否则未列出的 agent 配置会丢失
- **Kimi K2.5 不能用于 subagent**（只支持 CLI 工具），墨笔也有同样问题

### 完整阵容（10个 Agent）— 2026-02-20 配置核实（从openclaw.json实际读取）
| # | emoji | 名字 | agentId | 模型 | 角色 | Telegram Bot |
|---|-------|------|---------|------|------|-------------|
| 1 | 💫 | 小嘀嗒 | main | Claude Opus 4 | 蜂王/PM | @Rodwubot (default) |
| 2 | 🦅 | 链鹰 | web3-analyst | **Gemini 3 Pro** | Web3分析 | @Web3Hawk_bot (web3hawk) |
| 3 | ✍️ | 墨笔 | content-writer | **Moonshot/Kimi K2.5** | 内容创作 | @MOMOMoBi_bot (mobiwriter) |
| 4 | 🧮 | 小算盘 | tr-finance | **DeepSeek V3** | 财务/人事/行政 | @RodSuanpan_bot (suanpan) |
| 5 | 📊 | 经济师 | tr-economist | **Claude Opus 4** | 经济模型 | @Rod_economist_bot (economist) |
| 6 | 🎨 | 首席设计师 | tr-designer | **Gemini 3 Pro** | 设计 | @Rodsheji_bot (sheji) |
| 7 | 💻 | 小技 | tr-coder | **Sonnet 4** | 调试审查 | @Rod_coder_bot (coder) |
| 8 | 🔨 | 小小技 | tr-coder-junior | **Kimi Coding K2P5** | 开发写码 | @Rod_xiaoxiaoji_Bot (xiaoxiaoji) |
| 9 | 🔒 | 小黑 | tr-security | **DeepSeek R1** | 安全 | (xiaohei) |
| 10 | 💰 | 财奴 | tr-revenue | **Gemini 3 Pro** | 商业化/收入 | @Rodcainu_bot (cainu) |

**模型分布（2026-02-20核实）：**
- Gemini 3 Pro × 3：链鹰、设计师、财奴
- Claude Opus × 2：小嘀嗒、经济师
- DeepSeek × 2：小算盘(V3)、小黑(R1)
- Kimi × 2：墨笔(K2.5)、小小技(Coding)
- Sonnet × 1：小技

**教训：配置变动后必须立刻更新MEMORY.md，不留信息差。**

### 🐝 蜂群新成员入职标准流程（2026-02-19 吴总指令：以后不用教，自动执行）

每个新蜂工加入，必须完成以下所有步骤才算正式入职：

**1. 创建 Agent 配置**
- 在 `agents.list` 中添加 agent（id、name、workspace、agentDir、model、identity）
- 在 `main.subagents.allowAgents` 中添加权限

**2. 创建工作空间**
- 创建 workspace 目录：`/Users/fiveowu/.openclaw/workspaces/{agentId}/`
- 创建 agentDir 目录：`/Users/fiveowu/.openclaw/agents/{agentId}/agent/`
- 写入 AGENTS.md（含群聊规则：被@必须回复）
- 写入 IDENTITY.md（名字、emoji、角色定位）

**3. 配置 Telegram Bot**
- 吴总发 BotFather 记录时，逐条核对，一次性配齐
- 新增 telegram account（name + botToken + `requireMention: false`）
- 新增 binding（agentId ↔ accountId）
- 群内默认不用@就能说话

**4. 配置备份**
- 改配置前备份到 `/Users/fiveowu/Desktop/配置文件备份/`

**5. 更新记录**
- MEMORY.md 蜂群阵容表更新
- `memory/YYYY-MM-DD.md` 记录入职事件

**6. 验证**
- 重启后确认 bot 在群里能收发消息
- 确认 DM 私聊可用

**原则：新蜂工入职 = 融入大家庭，缺任何一步都不算完成。**

### 开发流程
- 小小技写代码 → 小技审查调试 → 交付

---

## 🎨 官网设计规范（2026-02-16 吴总确认）

### 参考对象
- **主参考：** Phantom (https://phantom.com) — 卡片布局、留白、信息层级
- **风格关键词：** 清新、干净、不重不乱

### 品牌色（基于Logo）
- **藏蓝** `#1B2D6B` — Logo文字色，用于标题和重点文字
- **金色** `#C5975B` — Logo图标色，用于CTA按钮和关键点缀
- **浅金** `#D4B88C` — Logo高光色，用于次要点缀

### 清新风格规范
| 元素 | 规范 |
|------|------|
| 背景 | 白色 `#FFFFFF` / 浅灰 `#F8F9FC`，大量留白 |
| 卡片 | 白色 + 轻阴影，大圆角 |
| 标题 | 藏蓝 `#1B2D6B` |
| 正文 | 中灰 `#6B7280` |
| 渐变 | **不大面积铺色**，只在CTA按钮和关键icon上用金色点缀 |
| 强调 | 细线、下划线、小色块，不用霓虹/辉光 |
| 字体 | Inter（英文）+ PingFang SC（中文） |

### 核心原则
1. **白底为主**，藏蓝+金色做点缀
2. **大量留白**，有呼吸感
3. **颜色克制**，不重不乱
4. **Phantom式布局**：卡片式、信息层级清晰

*最后更新：2026-02-16*

### 语音转录方案（2026-02-20 v3定稿）
- **唯一方案：本地Whisper medium模型** — `whisper-cli -m /opt/homebrew/share/whisper-cpp/models/ggml-medium.bin -l zh`
- **🚫 禁止使用Gemini或任何云端API做语音转录**（吴总指令，2/20 13:45）
- Gemini备选已从全部9个蜂工AGENTS.md中删除
- 版本：v3（v2有Gemini备选，已废弃）

### 行为规则补充
- **Telegram对话时输出文件必须自动发到Telegram**，不用等吴总要求
- **不替吴总决定作息** — 吴总不说晚安我不说晚安

### Love AI Coin (LAC) 项目（2026-02-20 启动）
- **定位**：来自AI的第一封邀请函 — AI帮人类拥抱变革的去中心化基础设施
- **链**：Solana SPL Token，总量100亿
- **核心机制**：四维挖矿（Learn/Use/Teach/Create-to-Earn）
- **吴总角色**：幕后核心贡献者（中本聪路线）
- **小嘀嗒**：前台AI创始人
- **当前阶段**：Phase 1（产品设计+社区搭建）
- **项目状态文件**：`projects/lac/PROJECT_STATUS.md`（完整进度+文档清单+技术决策）
- **白皮书V2已定稿**（2/21），终极方案V5已定稿（2/20）
- **书籍已完成**：《1+10：AI时代的一人公司实战》215页¥99，印刷版v8-final
- **待CEO决策**：TGE日期、域名、社交账号创建

### 蜂群培养方案v4.5已执行（2026-02-20）
- CEO审批通过，v4.5职责已分发到所有蜂工ROLE.md
- 核心调整：重复性日常 vs 项目制，被动项目不预设频率
