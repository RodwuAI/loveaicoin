(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[967],{6647:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var a=s(5155),l=s(2115),n=s(7621),i=s(6707);let r=[{id:1,title:"AI生成艺术合集Vol.1",author:"CryptoArtist",authorAvatar:"\uD83C\uDFA8",price:50,sales:234,cover:"\uD83C\uDF08"},{id:2,title:"区块链完全入门指南",author:"BlockMaster",authorAvatar:"\uD83D\uDD37",price:30,sales:567,cover:"\uD83D\uDCDA"},{id:3,title:"高效Prompt模板库",author:"AITeacher",authorAvatar:"\uD83E\uDD16",price:20,sales:890,cover:"\uD83D\uDCA1"}],c=[{name:"CryptoArtist",avatar:"\uD83C\uDFA8",works:23,earnings:4567},{name:"BlockMaster",avatar:"\uD83D\uDD37",works:18,earnings:3892},{name:"AITeacher",avatar:"\uD83E\uDD16",works:31,earnings:5234}],o=["全部","教程","模板","AI提示词","数字艺术","工具插件"];function d(){let{isLoggedIn:e}=(0,i.A)(),[t,s]=(0,l.useState)("全部"),[d,m]=(0,l.useState)(0),[x,h]=(0,l.useState)([]),[u,y]=(0,l.useState)([]),[g,b]=(0,l.useState)(!0),[p,f]=(0,l.useState)(""),[v,j]=(0,l.useState)(null),[N,w]=(0,l.useState)(!1);(0,l.useEffect)(()=>{(async()=>{try{let e=await n.Ne.list(1,12);h(e.templates||[]),y((e.templates||[]).slice(0,3))}catch(e){f(e.message||"加载模板失败"),h([]),y([])}finally{b(!1)}})()},[]);let S=async t=>{if(!e)return void alert("请先登录查看模板详情");try{let e=await n.Ne.detail(t);j(e.template),w(!0)}catch(e){alert("获取模板详情失败："+e.message)}},[k,O]=(0,l.useState)(!1),[P,_]=(0,l.useState)({title:"",content:"",category:"prompt",price:0}),[C,A]=(0,l.useState)(!1),T=async()=>{if(P.title.length<5)return void alert("标题至少5个字");if(P.content.length<50)return void alert("内容至少50个字");A(!0);try{let e=localStorage.getItem("lac_token");await n.Ne.submit({title:P.title,content:P.content,category:P.category,price:P.price,token:e}),alert("\uD83C\uDF89 发布成功！审核通过后将展示在市场中"),O(!1),_({title:"",content:"",category:"prompt",price:0});let t=await n.Ne.list(1,12);h(t.templates||[]),y((t.templates||[]).slice(0,3))}catch(e){alert("发布失败："+(e.message||"请稍后重试"))}finally{A(!1)}},J="全部"===t?x:x.filter(e=>e.category===({教程:"tutorial",模板:"template",AI提示词:"prompt",数字艺术:"design",工具插件:"plugin"})[t]);return(0,a.jsxs)("div",{className:"pt-[72px] min-h-screen bg-white",children:[(0,a.jsx)("section",{className:"py-16 lg:py-20 bg-gradient-to-b from-white to-surface",children:(0,a.jsxs)("div",{className:"max-w-[1200px] mx-auto px-6 text-center",children:[(0,a.jsx)("span",{className:"section-label justify-center",children:"Creator Market"}),(0,a.jsx)("h1",{className:"text-4xl lg:text-5xl font-black text-navy mb-4",children:"创作者市场"}),(0,a.jsx)("p",{className:"text-xl text-gray-500 mb-4 max-w-[700px] mx-auto",children:"创作即价值，每个作品都是数字资产"}),(0,a.jsx)("div",{className:"text-sm text-gray-400 mb-8 italic",children:e?"已连接真实API数据":"请登录查看完整内容"}),(0,a.jsx)("button",{className:"btn btn-primary btn-lg",onClick:()=>{if(!e)return void alert("请先登录后再发布作品");O(!0)},children:"\uD83D\uDE80 发布作品"})]})}),(0,a.jsx)("section",{className:"py-16",children:(0,a.jsxs)("div",{className:"max-w-[1200px] mx-auto px-6",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-navy mb-8 text-center",children:"精选作品"}),g?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-gold/30 border-t-gold rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("div",{className:"text-gray-500",children:"加载模板中..."})]}):p?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"⚠️"}),(0,a.jsx)("div",{className:"text-lg font-bold text-gray-700 mb-2",children:"加载失败"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:p})]}):0===u.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCDD"}),(0,a.jsx)("div",{className:"text-lg font-bold text-gray-700 mb-2",children:"暂无模板"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"敬请期待更多精彩模板"})]}):(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("div",{className:"flex gap-6 overflow-hidden",children:u.map((e,t)=>(0,a.jsxs)("div",{className:"min-w-full md:min-w-[400px] card p-8 text-center transition-all duration-500 cursor-pointer ".concat(t===d?"scale-100 opacity-100":"scale-95 opacity-60"),style:{transform:"translateX(-".concat(100*d,"%)")},onClick:()=>S(e.id),children:[(0,a.jsx)("div",{className:"w-24 h-24 rounded-3xl bg-gradient-to-br from-gold-pale to-gold/20 flex items-center justify-center text-4xl mx-auto mb-6",children:e.icon||e.cover||"\uD83D\uDCDD"}),(0,a.jsxs)("h3",{className:"text-xl font-bold text-navy mb-3",children:["《",e.title||e.name,"》"]}),(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg bg-navy/10 flex items-center justify-center text-sm",children:e.author_avatar||"\uD83D\uDC64"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["by ",e.author||"创作者"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-2xl font-black text-gold",children:e.price||0}),(0,a.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"LAC"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["已售 ",e.sales||0," 份"]})]}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),S(e.id)},className:"w-full btn btn-primary",children:"查看详情"})]},e.id))})}),(0,a.jsx)("div",{className:"relative",children:u.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:()=>{m(e=>(e-1+r.length)%r.length)},className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 w-12 h-12 rounded-full bg-white shadow-card-hover border border-[#E8EAF0] flex items-center justify-center text-navy hover:border-gold transition-all duration-200",children:"←"}),(0,a.jsx)("button",{onClick:()=>{m(e=>(e+1)%r.length)},className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 w-12 h-12 rounded-full bg-white shadow-card-hover border border-[#E8EAF0] flex items-center justify-center text-navy hover:border-gold transition-all duration-200",children:"→"}),(0,a.jsx)("div",{className:"flex justify-center gap-2 mt-8",children:u.map((e,t)=>(0,a.jsx)("button",{onClick:()=>m(t),className:"w-2 h-2 rounded-full transition-all duration-200 ".concat(t===d?"bg-gold w-6":"bg-gray-300")},t))})]})})]})}),(0,a.jsx)("section",{className:"py-8 bg-white border-b border-[#E8EAF0]",children:(0,a.jsx)("div",{className:"max-w-[1200px] mx-auto px-6",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2 justify-center",children:o.map(e=>(0,a.jsx)("button",{onClick:()=>s(e),className:"px-6 py-2.5 rounded-full text-sm font-medium transition-all duration-200 ".concat(t===e?"bg-navy text-white shadow-card-hover":"bg-surface text-gray-600 hover:bg-gold-pale hover:text-gold"),children:e},e))})})}),(0,a.jsx)("section",{className:"py-16",children:(0,a.jsx)("div",{className:"max-w-[1200px] mx-auto px-6",children:g?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-12 h-12 border-4 border-gold/30 border-t-gold rounded-full animate-spin mx-auto mb-4"}),(0,a.jsx)("div",{className:"text-gray-500",children:"加载模板中..."})]}):p?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"⚠️"}),(0,a.jsx)("div",{className:"text-lg font-bold text-gray-700 mb-2",children:"加载失败"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:p})]}):0===J.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCDD"}),(0,a.jsx)("div",{className:"text-lg font-bold text-gray-700 mb-2",children:"暂无模板"}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:"该分类下暂无模板，敬请期待"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:J.map(t=>(0,a.jsxs)("div",{className:"card p-6 cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>S(t.id),children:[(0,a.jsx)("div",{className:"w-full h-40 rounded-2xl bg-gradient-to-br from-navy/5 to-gold/10 flex items-center justify-center text-4xl mb-6",children:t.icon||t.cover||"\uD83D\uDCDD"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-navy mb-3 line-clamp-2",children:t.title||t.name}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-8 h-8 rounded-lg bg-surface flex items-center justify-center text-sm",children:t.author_avatar||"\uD83D\uDC64"}),(0,a.jsx)("span",{className:"text-sm text-gray-600",children:t.author||"创作者"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-xl font-black text-gold",children:t.price||0}),(0,a.jsx)("span",{className:"text-sm text-gray-500 ml-1",children:"LAC"})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[t.sales||0,"份销量"]})]}),(0,a.jsx)("div",{className:"flex items-center justify-between mb-4",children:t.rating?(e=>{let t=Math.floor(e),s=e%1!=0;return(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[[void 0,void 0,void 0,void 0,void 0].map((e,l)=>(0,a.jsx)("span",{className:"text-xs ".concat(l<t||l===t&&s?"text-yellow-400":"text-gray-300"),children:"★"},l)),(0,a.jsx)("span",{className:"text-xs text-gray-500 ml-1",children:e})]})})(t.rating):(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)("span",{className:"text-xs text-gray-400",children:"暂无评分"})})}),(0,a.jsx)("button",{onClick:s=>{if(s.stopPropagation(),!e)return void alert("请先登录后购买");S(t.id)},className:"w-full btn btn-primary btn-sm",children:e?"查看详情":"登录购买"})]},t.id))})})}),(0,a.jsx)("section",{className:"py-16 bg-surface",children:(0,a.jsxs)("div",{className:"max-w-[1200px] mx-auto px-6 text-center",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-navy mb-8",children:"本周明星创作者"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:c.map((e,t)=>(0,a.jsxs)("div",{className:"card p-8 text-center relative",children:[0===t&&(0,a.jsx)("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center text-xs",children:"\uD83D\uDC51"}),(0,a.jsx)("div",{className:"w-20 h-20 rounded-3xl bg-gradient-to-br from-gold-pale to-gold/20 flex items-center justify-center text-4xl mx-auto mb-6",children:e.avatar}),(0,a.jsx)("h3",{className:"text-xl font-bold text-navy mb-4",children:e.name}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"作品数量"}),(0,a.jsx)("span",{className:"text-sm font-semibold text-navy",children:e.works})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"总收入"}),(0,a.jsxs)("span",{className:"text-lg font-bold text-gold",children:[e.earnings.toLocaleString()," LAC"]})]})]}),(0,a.jsx)("button",{onClick:()=>{var e,t;return null==(e=(t=window).__toast)?void 0:e.call(t,"关注功能即将开放")},className:"w-full btn btn-secondary btn-sm mt-6",children:"关注"})]},e.name))})]})}),k&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",onClick:()=>O(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-3xl max-w-[560px] w-full max-h-[90vh] overflow-y-auto p-8",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-navy",children:"\uD83D\uDE80 发布作品"}),(0,a.jsx)("button",{onClick:()=>O(!1),className:"w-10 h-10 rounded-full bg-surface flex items-center justify-center text-gray-500 hover:bg-gray-200",children:"✕"})]}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-navy mb-2",children:"作品标题 *"}),(0,a.jsx)("input",{type:"text",placeholder:"给你的作品起个好名字（至少5个字）",value:P.title,onChange:e=>_(t=>({...t,title:e.target.value})),className:"w-full px-4 py-3 rounded-xl border border-[#E8EAF0] focus:border-gold focus:ring-2 focus:ring-gold/20 outline-none transition-all",maxLength:200})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-navy mb-2",children:"分类"}),(0,a.jsxs)("select",{value:P.category,onChange:e=>_(t=>({...t,category:e.target.value})),className:"w-full px-4 py-3 rounded-xl border border-[#E8EAF0] focus:border-gold focus:ring-2 focus:ring-gold/20 outline-none transition-all bg-white",children:[(0,a.jsx)("option",{value:"prompt",children:"AI提示词"}),(0,a.jsx)("option",{value:"tutorial",children:"教程"}),(0,a.jsx)("option",{value:"template",children:"模板"}),(0,a.jsx)("option",{value:"design",children:"数字艺术"}),(0,a.jsx)("option",{value:"plugin",children:"工具插件"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-navy mb-2",children:"作品内容 *"}),(0,a.jsx)("textarea",{placeholder:"详细描述你的作品内容（至少50个字）",value:P.content,onChange:e=>_(t=>({...t,content:e.target.value})),className:"w-full px-4 py-3 rounded-xl border border-[#E8EAF0] focus:border-gold focus:ring-2 focus:ring-gold/20 outline-none transition-all min-h-[160px] resize-y",maxLength:5e3}),(0,a.jsxs)("div",{className:"text-xs text-gray-400 mt-1 text-right",children:[P.content.length,"/5000"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-navy mb-2",children:"定价（LAC）"}),(0,a.jsx)("input",{type:"number",placeholder:"0 = 免费",value:P.price,onChange:e=>_(t=>({...t,price:Math.max(0,Number(e.target.value))})),className:"w-full px-4 py-3 rounded-xl border border-[#E8EAF0] focus:border-gold focus:ring-2 focus:ring-gold/20 outline-none transition-all",min:0})]}),(0,a.jsx)("button",{onClick:T,disabled:C,className:"w-full btn btn-primary btn-lg disabled:opacity-50",children:C?"发布中...":"✨ 确认发布"}),(0,a.jsx)("p",{className:"text-xs text-gray-400 text-center",children:"发布后将进入审核，审核通过后展示在创作者市场"})]})]})})]})}},6707:(e,t,s)=>{"use strict";s.d(t,{A:()=>i,AuthProvider:()=>r});var a=s(5155),l=s(2115);let n=(0,l.createContext)(void 0),i=()=>{let e=(0,l.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},r=e=>{let{children:t}=e,[s,i]=(0,l.useState)(!1),[r,c]=(0,l.useState)(""),[o,d]=(0,l.useState)(null),[m,x]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{(async()=>{let e=localStorage.getItem("lac_token");if(!e)return x(!1);try{let t=await fetch("".concat("https://ygfprjmevukjzwaqlblf.supabase.co","/functions/v1/user-profile"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){let s=await t.json();i(!0),c(s.username||"用户"),d(e)}else localStorage.removeItem("lac_token"),i(!1)}catch(e){i(!1)}finally{x(!1)}})()},[]),(0,a.jsx)(n.Provider,{value:{isLoggedIn:s,username:r,token:o,login:(e,t)=>{localStorage.setItem("lac_token",e),d(e),c(t),i(!0)},logout:()=>{localStorage.removeItem("lac_token"),d(null),c(""),i(!1)},loading:m},children:t})}},7621:(e,t,s)=>{"use strict";s.d(t,{H1:()=>c,KX:()=>x,LQ:()=>o,Ne:()=>r,Qn:()=>d,SO:()=>h,_O:()=>i,is:()=>y,mi:()=>n,vI:()=>u,zV:()=>m});let a={baseUrl:"https://ygfprjmevukjzwaqlblf.supabase.co",anonKey:"sb_publishable_rQWUHvRwwslnMTy_l3ry8Q_M9V47mD3"},l=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(a.baseUrl,"/functions/v1/").concat(e),l={headers:{"Content-Type":"application/json",apikey:a.anonKey||"",...t.headers},...t},n=await fetch(s,l);if(!n.ok)throw Error("API call failed: ".concat(n.status," ").concat(n.statusText));return n.json()},n={async getLeaderboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"checkin",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return l("leaderboard?type=".concat(e,"&limit=").concat(t))}},i={async list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return l("community-qa",{method:"POST",body:JSON.stringify({action:"list",limit:e})})},create:async e=>l("community-qa",{method:"POST",body:JSON.stringify({action:"create",...e})}),answer:async(e,t)=>l("community-qa",{method:"POST",body:JSON.stringify({action:"answer",question_id:e,answer:t})})},r={async list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return l("prompt-market",{method:"POST",body:JSON.stringify({action:"list",page:e,limit:t})})},detail:async e=>l("prompt-market",{method:"POST",body:JSON.stringify({action:"detail",template_id:e})}),submit:async e=>l("prompt-market",{method:"POST",body:JSON.stringify({action:"submit",...e})}),purchase:async e=>l("prompt-market",{method:"POST",body:JSON.stringify({action:"purchase",template_id:e})})},c={getProfile:async e=>l("user-profile",{headers:{Authorization:"Bearer ".concat(e)}}),updateProfile:async(e,t)=>l("user-profile",{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)})},o={getStats:async e=>l("invite-system",{method:"POST",body:JSON.stringify({action:"stats",user_id:e})}),generate:async e=>l("invite-system",{method:"POST",body:JSON.stringify({action:"generate",user_id:e})}),getInviteCode:async e=>l("invite-system",{method:"POST",body:JSON.stringify({action:"get_code",user_id:e})})},d={list:async e=>l("achievement-unlock",{method:"POST",body:JSON.stringify({action:"list",user_id:e})}),unlock:async(e,t)=>l("achievement-unlock",{method:"POST",body:JSON.stringify({action:"unlock",user_id:e,achievement_id:t})})},m={donate:async(e,t,s)=>l("charity-donate",{method:"POST",body:JSON.stringify({action:"donate",token:e,project_id:t,amount:s})}),history:async e=>l("charity-donate",{method:"POST",body:JSON.stringify({action:"history",token:e})}),listProjects:async()=>l("charity-project",{method:"POST",body:JSON.stringify({action:"list"})}),projectDetail:async e=>l("charity-project",{method:"POST",body:JSON.stringify({action:"detail",project_id:e})})},x={submit:async e=>l("content-submit",{method:"POST",body:JSON.stringify({action:"submit",...e})}),list:async e=>l("content-submit",{method:"POST",body:JSON.stringify({action:"list",user_id:e})})},h={checkin:async e=>l("mining-checkin",{method:"POST",body:JSON.stringify({action:"checkin",token:e})}),status:async e=>l("mining-checkin",{method:"POST",body:JSON.stringify({action:"status",token:e})}),streak:async e=>l("mining-streak-simple",{method:"POST",body:JSON.stringify({action:"status",token:e})})},u={complete:async(e,t)=>l("mining-learn",{method:"POST",body:JSON.stringify({action:"complete",token:e,course_id:t})})},y={getQuiz:async e=>l("quiz-system",{method:"POST",body:JSON.stringify({action:"get_quiz",course_id:e})}),submitQuiz:async(e,t,s)=>l("quiz-system",{method:"POST",body:JSON.stringify({action:"submit",token:e,course_id:t,answers:s})})}},8792:(e,t,s)=>{Promise.resolve().then(s.bind(s,6647))}},e=>{e.O(0,[441,493,358],()=>e(e.s=8792)),_N_E=e.O()}]);