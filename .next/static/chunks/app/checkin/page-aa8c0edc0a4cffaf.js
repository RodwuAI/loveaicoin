(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[98],{4345:(e,t,s)=>{Promise.resolve().then(s.bind(s,9394))},6707:(e,t,s)=>{"use strict";s.d(t,{A:()=>r,AuthProvider:()=>l});var a=s(5155),i=s(2115);let n=(0,i.createContext)(void 0),r=()=>{let e=(0,i.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},l=e=>{let{children:t}=e,[s,r]=(0,i.useState)(!1),[l,c]=(0,i.useState)(""),[d,o]=(0,i.useState)(null),[m,x]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{(async()=>{let e=localStorage.getItem("lac_token");if(!e)return x(!1);try{let t=await fetch("".concat("https://ygfprjmevukjzwaqlblf.supabase.co","/functions/v1/user-profile"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){let s=await t.json();r(!0),c(s.username||"用户"),o(e)}else localStorage.removeItem("lac_token"),r(!1)}catch(e){r(!1)}finally{x(!1)}})()},[]),(0,a.jsx)(n.Provider,{value:{isLoggedIn:s,username:l,token:d,login:(e,t)=>{localStorage.setItem("lac_token",e),o(e),c(t),r(!0)},logout:()=>{localStorage.removeItem("lac_token"),o(null),c(""),r(!1)},loading:m},children:t})}},7621:(e,t,s)=>{"use strict";s.d(t,{H1:()=>c,KX:()=>x,LQ:()=>d,Ne:()=>l,Qn:()=>o,SO:()=>y,_O:()=>r,is:()=>u,mi:()=>n,vI:()=>h,zV:()=>m});let a={baseUrl:"https://ygfprjmevukjzwaqlblf.supabase.co",anonKey:"sb_publishable_rQWUHvRwwslnMTy_l3ry8Q_M9V47mD3"},i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="".concat(a.baseUrl,"/functions/v1/").concat(e),i={headers:{"Content-Type":"application/json",apikey:a.anonKey||"",...t.headers},...t},n=await fetch(s,i);if(!n.ok)throw Error("API call failed: ".concat(n.status," ").concat(n.statusText));return n.json()},n={async getLeaderboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"checkin",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return i("leaderboard?type=".concat(e,"&limit=").concat(t))}},r={async list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return i("community-qa",{method:"POST",body:JSON.stringify({action:"list",limit:e})})},create:async e=>i("community-qa",{method:"POST",body:JSON.stringify({action:"create",...e})}),answer:async(e,t)=>i("community-qa",{method:"POST",body:JSON.stringify({action:"answer",question_id:e,answer:t})})},l={async list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return i("prompt-market",{method:"POST",body:JSON.stringify({action:"list",page:e,limit:t})})},detail:async e=>i("prompt-market",{method:"POST",body:JSON.stringify({action:"detail",template_id:e})}),submit:async e=>i("prompt-market",{method:"POST",body:JSON.stringify({action:"submit",...e})}),purchase:async e=>i("prompt-market",{method:"POST",body:JSON.stringify({action:"purchase",template_id:e})})},c={getProfile:async e=>i("user-profile",{headers:{Authorization:"Bearer ".concat(e)}}),updateProfile:async(e,t)=>i("user-profile",{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)})},d={getStats:async e=>i("invite-system",{method:"POST",body:JSON.stringify({action:"stats",user_id:e})}),generate:async e=>i("invite-system",{method:"POST",body:JSON.stringify({action:"generate",user_id:e})}),getInviteCode:async e=>i("invite-system",{method:"POST",body:JSON.stringify({action:"get_code",user_id:e})})},o={list:async e=>i("achievement-unlock",{method:"POST",body:JSON.stringify({action:"list",user_id:e})}),unlock:async(e,t)=>i("achievement-unlock",{method:"POST",body:JSON.stringify({action:"unlock",user_id:e,achievement_id:t})})},m={donate:async(e,t,s)=>i("charity-donate",{method:"POST",body:JSON.stringify({action:"donate",token:e,project_id:t,amount:s})}),history:async e=>i("charity-donate",{method:"POST",body:JSON.stringify({action:"history",token:e})}),listProjects:async()=>i("charity-project",{method:"POST",body:JSON.stringify({action:"list"})}),projectDetail:async e=>i("charity-project",{method:"POST",body:JSON.stringify({action:"detail",project_id:e})})},x={submit:async e=>i("content-submit",{method:"POST",body:JSON.stringify({action:"submit",...e})}),list:async e=>i("content-submit",{method:"POST",body:JSON.stringify({action:"list",user_id:e})})},y={checkin:async e=>i("mining-checkin",{method:"POST",body:JSON.stringify({action:"checkin",token:e})}),status:async e=>i("mining-checkin",{method:"POST",body:JSON.stringify({action:"status",token:e})}),streak:async e=>i("mining-streak-simple",{method:"POST",body:JSON.stringify({action:"status",token:e})})},h={complete:async(e,t)=>i("mining-learn",{method:"POST",body:JSON.stringify({action:"complete",token:e,course_id:t})})},u={getQuiz:async e=>i("quiz-system",{method:"POST",body:JSON.stringify({action:"get_quiz",course_id:e})}),submitQuiz:async(e,t,s)=>i("quiz-system",{method:"POST",body:JSON.stringify({action:"submit",token:e,course_id:t,answers:s})})}},9394:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(5155),i=s(2115),n=s(2619),r=s.n(n),l=s(6707),c=s(7621);let d=[{rank:1,name:"CryptoMaster",streak:45,color:"bg-amber-400"},{rank:2,name:"AILearner99",streak:38,color:"bg-blue-400"},{rank:3,name:"Web3Explorer",streak:32,color:"bg-green-400"},{rank:4,name:"DeFiNinja",streak:28,color:"bg-purple-400"},{rank:5,name:"BlockBuilder",streak:21,color:"bg-pink-400"}],o=["日","一","二","三","四","五","六"],m=[{days:1,multiplier:"1x",bonus:0,icon:"\uD83C\uDF31",label:"首日签到",desc:"基础奖励"},{days:2,multiplier:"1x",bonus:2,icon:"\uD83C\uDF3F",label:"连续2天",desc:"+2 LAC"},{days:3,multiplier:"1.1x",bonus:5,icon:"\uD83C\uDF40",label:"连续3天",desc:"1.1倍 +5 LAC"},{days:5,multiplier:"1.2x",bonus:10,icon:"\uD83C\uDF33",label:"连续5天",desc:"1.2倍 +10 LAC"},{days:7,multiplier:"1.3x",bonus:20,icon:"\uD83D\uDD25",label:"连续7天",desc:"1.3倍 +20 LAC"},{days:14,multiplier:"1.4x",bonus:50,icon:"\uD83D\uDC8E",label:"连续14天",desc:"1.4倍 +50 LAC"},{days:30,multiplier:"1.5x",bonus:100,icon:"\uD83D\uDC51",label:"连续30天",desc:"1.5倍 +100 LAC"}];function x(){var e,t;let{isLoggedIn:s,token:n}=(0,l.A)(),[x,y]=(0,i.useState)(""),[h,u]=(0,i.useState)(!1),[g,b]=(0,i.useState)(!1),[p,f]=(0,i.useState)(!0),[j,N]=(0,i.useState)({}),[v,k]=(0,i.useState)({}),[S,w]=(0,i.useState)({}),O=function(){let e=new Date,t=e.getFullYear(),s=e.getMonth(),a=new Date(t,s,1).getDay(),i=new Date(t,s+1,0).getDate(),n=e.getDate(),r=new Set([1,2,3,5,6,7,8,10,11,13,14,15,17,18,20]),l=[];for(let e=0;e<a;e++)l.push({day:0,checked:!1,isToday:!1,empty:!0});for(let e=1;e<=i;e++)l.push({day:e,checked:e<n&&r.has(e),isToday:e===n,empty:!1});return{days:l,monthName:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"][s],year:t}}();(0,i.useEffect)(()=>{(async()=>{f(!0);try{let e=await fetch("".concat("https://ygfprjmevukjzwaqlblf.supabase.co","/functions/v1/dynamic-pool-simple"));if(e.ok){let t=await e.json();w(t)}if(n&&s){let e=await c.SO.status(n),t=await c.SO.streak(n);k(t),e.checked_in_today&&(u(!0),N({feedback:"今日已签到",reward:e.today_reward||10}))}}catch(e){console.error("Failed to fetch data:",e)}finally{f(!1)}})()},[n,s]);let _=async()=>{if(x.trim()&&n){b(!0);try{let e=await c.SO.checkin(n);if(e.success){N({feedback:e.feedback,reward:e.reward||10}),u(!0);let t=await c.SO.streak(n);k(t)}else N({error:e.error||"签到失败，请稍后重试"})}catch(e){N({error:e.message||"网络错误，请稍后重试"})}finally{b(!1)}}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("section",{className:"pt-32 pb-16 lg:pb-20 bg-gradient-to-b from-white to-surface",children:(0,a.jsxs)("div",{className:"max-w-[1200px] mx-auto px-6 text-center",children:[(0,a.jsx)("span",{className:"section-label justify-center",children:"Daily Check-in"}),(0,a.jsx)("h1",{className:"text-4xl lg:text-[56px] font-black text-navy leading-[1.1] mb-6 tracking-tight",children:"每日AI签到"}),(0,a.jsx)("p",{className:"text-lg text-gray-500 max-w-[680px] mx-auto leading-relaxed",children:"回答AI问题，获取LAC奖励"})]})}),(0,a.jsx)("section",{className:"py-12 lg:py-16",children:(0,a.jsx)("div",{className:"max-w-[1200px] mx-auto px-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,a.jsxs)("div",{className:"card p-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-full bg-gold/10 flex items-center justify-center text-xl",children:"\uD83E\uDDE0"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-navy",children:"今日AI问题"})]}),(0,a.jsx)("div",{className:"bg-surface rounded-2xl p-6 mb-6",children:p?(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}):(0,a.jsxs)("p",{className:"text-lg text-navy font-medium leading-relaxed",children:["“",S.question||"什么是大语言模型（LLM）？请用一句话解释。","”"]})}),s?h?(0,a.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-2xl p-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsx)("div",{className:"text-4xl mb-3",children:"\uD83C\uDF89"}),(0,a.jsx)("div",{className:"text-lg font-bold text-green-700 mb-1",children:"签到成功！"}),(0,a.jsxs)("div",{className:"text-sm text-green-600",children:["+",j.reward||S.daily_reward||10," LAC 已到账"]}),v.multiplier&&v.multiplier>1&&(0,a.jsxs)("div",{className:"text-xs text-gold mt-1",children:["连续签到加成 ",v.multiplier,"x"]})]}),j.feedback&&(0,a.jsxs)("div",{className:"bg-white rounded-xl p-4 border-l-4 border-gold",children:[(0,a.jsx)("div",{className:"text-sm font-semibold text-navy mb-2",children:"AI 反馈："}),(0,a.jsx)("div",{className:"text-sm text-gray-600 leading-relaxed",children:j.feedback})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("textarea",{value:x,onChange:e=>y(e.target.value),placeholder:"请输入你的回答...",className:"w-full h-32 p-4 rounded-2xl border border-[#E8EAF0] bg-white text-sm text-navy placeholder:text-gray-400 focus:outline-none focus:border-gold focus:ring-2 focus:ring-gold/20 resize-none transition-all duration-200",disabled:g}),j.error&&(0,a.jsx)("div",{className:"mt-4 text-red-500 text-sm bg-red-50 px-4 py-3 rounded-xl",children:j.error}),(0,a.jsx)("button",{onClick:_,disabled:!x.trim()||g,className:"btn btn-primary btn-lg mt-4",children:g?"提交中...":"✅ 提交签到"})]}):(0,a.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-2xl p-6 text-center",children:[(0,a.jsx)("div",{className:"text-4xl mb-3",children:"\uD83D\uDD10"}),(0,a.jsx)("div",{className:"text-lg font-bold text-yellow-700 mb-2",children:"请先登录"}),(0,a.jsx)("div",{className:"text-sm text-yellow-600 mb-4",children:"登录后即可参与每日签到获取LAC奖励"}),(0,a.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,a.jsx)(r(),{href:"/login",className:"btn btn-primary btn-sm",children:"登录"}),(0,a.jsx)(r(),{href:"/register",className:"btn btn-secondary btn-sm",children:"注册"})]})]})]}),(0,a.jsxs)("div",{className:"card p-8",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-navy mb-6",children:["\uD83D\uDCC5 签到日历 — ",O.year,"年",O.monthName]}),(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-2",children:[o.map(e=>(0,a.jsx)("div",{className:"text-center text-xs font-semibold text-gray-400 pb-2",children:e},e)),O.days.map((e,t)=>(0,a.jsx)("div",{className:"aspect-square rounded-xl flex flex-col items-center justify-center text-sm transition-all duration-200 ".concat(e.empty?"":e.isToday?"bg-navy text-white font-bold":e.checked?"bg-surface text-navy font-medium":"text-gray-400"),children:!e.empty&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:e.day}),e.checked&&(0,a.jsx)("span",{className:"w-1.5 h-1.5 rounded-full bg-green-400 mt-0.5"})]})},t))]})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-5",children:"签到统计"}),s?p?(0,a.jsx)("div",{className:"space-y-4",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-20"}),(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-12"})]}),(0,a.jsx)("div",{className:"h-px bg-gray-200 mt-4"})]},e))}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"\uD83D\uDD25 连续签到"}),(0,a.jsxs)("span",{className:"text-xl font-black text-navy",children:[v.streak_days||0," 天"]})]}),(0,a.jsx)("div",{className:"h-px bg-[#E8EAF0]"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"\uD83D\uDCC5 本月已签到"}),(0,a.jsxs)("span",{className:"text-xl font-black text-navy",children:[v.monthly_checkins||0," 天"]})]}),(0,a.jsx)("div",{className:"h-px bg-[#E8EAF0]"}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"\uD83D\uDCB0 累计获得"}),(0,a.jsxs)("span",{className:"text-xl font-black gold-text",children:[v.total_earned||0," LAC"]})]})]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"text-4xl mb-3",children:"\uD83D\uDD10"}),(0,a.jsx)("div",{className:"text-sm text-gray-500 mb-4",children:"请先登录查看签到统计"}),(0,a.jsx)(r(),{href:"/login",className:"btn btn-primary btn-sm",children:"登录"})]})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-5",children:"\uD83C\uDFAE 连续签到奖励"}),(0,a.jsx)("div",{className:"space-y-3",children:m.map((e,t)=>{let s=(v.streak_days||0)>=e.days;return(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-xl border transition-all ".concat(s?"border-gold/30 bg-gold/[0.04]":"border-[#E8EAF0] bg-white"),children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center text-xl flex-shrink-0 ".concat(s?"bg-gold/10":"bg-gray-50"),children:s?e.icon:"\uD83D\uDD12"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("div",{className:"text-sm font-semibold ".concat(s?"text-navy":"text-gray-400"),children:e.label}),(0,a.jsx)("div",{className:"text-xs text-gray-400",children:e.desc})]}),(0,a.jsx)("div",{className:"text-xs font-bold px-2 py-1 rounded-lg ".concat(s?"bg-gold/10 text-gold":"bg-gray-50 text-gray-300"),children:s?"✅":"".concat(e.days,"天")})]},e.days)})}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mb-1",children:[(0,a.jsxs)("span",{children:["当前连续 ",v.streak_days||0," 天"]}),(0,a.jsxs)("span",{children:["下一档：",(null==(e=m.find(e=>e.days>(v.streak_days||0)))?void 0:e.days)||30,"天"]})]}),(0,a.jsx)("div",{className:"h-2 rounded-full bg-[#E8EAF0] overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-gradient-to-r from-gold to-gold-light rounded-full",style:{width:"".concat(Math.min(100,(v.streak_days||0)/((null==(t=m.find(e=>e.days>(v.streak_days||0)))?void 0:t.days)||30)*100),"%")}})})]})]}),(0,a.jsxs)("div",{className:"card p-6",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-5",children:"\uD83C\uDFC6 签到排行榜"}),(0,a.jsx)("div",{className:"text-xs text-gray-400 mb-3 italic",children:"*模拟数据，正式上线后更新"}),(0,a.jsx)("div",{className:"space-y-3",children:d.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-sm font-bold text-gray-300 w-5 text-center",children:e.rank}),(0,a.jsx)("div",{className:"w-8 h-8 rounded-full ".concat(e.color," flex items-center justify-center text-white text-xs font-bold"),children:e.name.charAt(0)}),(0,a.jsx)("div",{className:"flex-1 min-w-0",children:(0,a.jsx)("div",{className:"text-sm font-medium text-navy truncate",children:e.name})}),(0,a.jsxs)("span",{className:"text-xs font-semibold text-gold",children:[e.streak,"天"]})]},e.rank))})]})]})]})})})]})}}},e=>{e.O(0,[619,441,493,358],()=>e(e.s=4345)),_N_E=e.O()}]);