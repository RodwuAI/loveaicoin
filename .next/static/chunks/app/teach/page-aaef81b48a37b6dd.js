(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[139],{3815:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>u});var s=a(5155),i=a(2115),l=a(7621),n=a(6707);let r=[{id:1,author:"BlockMaster",avatar:"\uD83D\uDD37",title:"DeFi流动性挖矿入门",type:"tutorial",typeLabel:"图文\uD83D\uDCDD",participants:156,tips:89,time:"2小时前",isLive:!1},{id:2,author:"AITeacher",avatar:"\uD83E\uDD16",title:"ChatGPT高级Prompt技巧",type:"live",typeLabel:"直播\uD83D\uDD34",participants:342,tips:0,time:"直播中",isLive:!0},{id:3,author:"CryptoNerd",avatar:"⚡",title:"Solana钱包安全指南",type:"video",typeLabel:"视频\uD83C\uDFAC",participants:234,tips:156,time:"5小时前",isLive:!1},{id:4,author:"WebDev101",avatar:"\uD83D\uDCBB",title:"React入门到实战",type:"tutorial",typeLabel:"图文\uD83D\uDCDD",participants:89,tips:45,time:"昨天",isLive:!1},{id:5,author:"DataWiz",avatar:"\uD83D\uDCCA",title:"Python数据可视化",type:"tutorial",typeLabel:"图文\uD83D\uDCDD",participants:167,tips:123,time:"2天前",isLive:!1},{id:6,author:"NFTArtist",avatar:"\uD83C\uDFA8",title:"NFT创作与铸造教程",type:"video",typeLabel:"视频\uD83C\uDFAC",participants:78,tips:67,time:"3天前",isLive:!1}],c=[{key:"all",label:"全部主题"},{key:"ai",label:"AI技术"},{key:"web3",label:"Web3"},{key:"dev",label:"编程开发"}],o=[{key:"all",label:"全部类型"},{key:"live",label:"直播"},{key:"tutorial",label:"图文"},{key:"video",label:"视频"}],d=[{key:"all",label:"全部难度"},{key:"beginner",label:"入门"},{key:"intermediate",label:"进阶"},{key:"advanced",label:"高级"}],m=[{key:"latest",label:"最新发布"},{key:"popular",label:"最多参与"},{key:"tips",label:"打赏最多"}],x=["我发布的","我参与的","收藏的"];function u(){let{isLoggedIn:e,token:t}=(0,n.A)(),[a,u]=(0,i.useState)("all"),[h,y]=(0,i.useState)("all"),[b,p]=(0,i.useState)("all"),[g,v]=(0,i.useState)("latest"),[f,j]=(0,i.useState)("我发布的"),[N,k]=(0,i.useState)(""),[S,w]=(0,i.useState)(!1),[O,P]=(0,i.useState)({title:"",content:"",type:"tutorial",category:"ai",difficulty:"beginner"}),_=async()=>{if(!e)return void alert("请先登录");try{let e=await l.LQ.generate("current_user_id");if(e.invite_code){let t=window.location.origin,a="".concat(t,"/register?invite=").concat(e.invite_code);k(a)}}catch(e){alert("生成邀请链接失败："+e.message)}},T=async t=>{if(t.preventDefault(),!e)return void alert("请先登录");try{let e={...O,author_id:"current_user_id"};await l.KX.submit(e),alert("内容提交成功！"),w(!1),P({title:"",content:"",type:"tutorial",category:"ai",difficulty:"beginner"})}catch(e){alert("提交失败："+e.message)}},D=e=>{P({...O,[e.target.name]:e.target.value})};return(0,s.jsxs)("div",{className:"pt-[72px] min-h-screen bg-white",children:[(0,s.jsx)("section",{className:"py-16 lg:py-20 bg-gradient-to-b from-white to-surface",children:(0,s.jsxs)("div",{className:"max-w-[1200px] mx-auto px-6 text-center",children:[(0,s.jsx)("span",{className:"section-label justify-center",children:"Teaching Plaza"}),(0,s.jsx)("h1",{className:"text-4xl lg:text-5xl font-black text-navy mb-4",children:"教学广场"}),(0,s.jsx)("p",{className:"text-xl text-gray-500 mb-8 max-w-[600px] mx-auto",children:"教是最好的学"}),(0,s.jsxs)("div",{className:"flex gap-4 justify-center",children:[(0,s.jsx)("button",{onClick:()=>w(!0),className:"btn btn-primary btn-lg",children:"\uD83C\uDFAF 发起教学"}),(0,s.jsx)("button",{onClick:_,className:"btn btn-secondary btn-lg",children:"\uD83D\uDCE8 生成邀请"})]})]})}),(0,s.jsx)("section",{className:"py-8 bg-white border-b border-[#E8EAF0]",children:(0,s.jsx)("div",{className:"max-w-[1200px] mx-auto px-6",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500 px-3 py-2",children:"主题："}),c.map(e=>(0,s.jsx)("button",{onClick:()=>u(e.key),className:"px-4 py-2 rounded-full text-sm transition-all duration-200 ".concat(a===e.key?"bg-navy text-white":"bg-surface text-gray-600 hover:bg-gold-pale"),children:e.label},e.key))]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"类型："}),(0,s.jsx)("select",{value:h,onChange:e=>y(e.target.value),className:"px-3 py-1.5 rounded-lg border border-[#E8EAF0] text-sm bg-white",children:o.map(e=>(0,s.jsx)("option",{value:e.key,children:e.label},e.key))})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"难度："}),(0,s.jsx)("select",{value:b,onChange:e=>p(e.target.value),className:"px-3 py-1.5 rounded-lg border border-[#E8EAF0] text-sm bg-white",children:d.map(e=>(0,s.jsx)("option",{value:e.key,children:e.label},e.key))})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 ml-auto",children:[(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"排序："}),(0,s.jsx)("select",{value:g,onChange:e=>v(e.target.value),className:"px-3 py-1.5 rounded-lg border border-[#E8EAF0] text-sm bg-white",children:m.map(e=>(0,s.jsx)("option",{value:e.key,children:e.label},e.key))})]})]})]})})}),(0,s.jsx)("section",{className:"py-16",children:(0,s.jsx)("div",{className:"max-w-[1200px] mx-auto px-6",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-navy",children:"教学动态"}),(0,s.jsx)("div",{className:"space-y-4",children:r.map(e=>(0,s.jsx)("div",{className:"card p-6 ".concat(e.isLive?"border-red-200 bg-red-50/30":""),children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-navy/10 to-gold/10 flex items-center justify-center text-lg flex-shrink-0",children:e.avatar}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("span",{className:"font-semibold text-navy",children:e.author}),(0,s.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-medium ".concat(e.isLive?"bg-red-100 text-red-600":"bg-gray-100 text-gray-600"),children:e.typeLabel}),e.isLive&&(0,s.jsx)("span",{className:"px-2 py-0.5 rounded-full text-xs font-semibold bg-red-500 text-white animate-pulse",children:"LIVE"})]}),(0,s.jsxs)("h3",{className:"text-lg font-bold text-navy mb-3",children:["《",e.title,"》"]}),(0,s.jsxs)("div",{className:"flex items-center gap-6 text-sm text-gray-500",children:[(0,s.jsxs)("span",{children:["\uD83D\uDC65 参与 ",e.participants,"人"]}),!e.isLive&&(0,s.jsxs)("span",{children:["\uD83D\uDC9D 打赏 ",e.tips," LAC"]}),e.isLive?(0,s.jsxs)("span",{className:"text-red-500 font-medium",children:["\uD83D\uDD34 观看 ",e.participants,"人"]}):(0,s.jsx)("span",{children:e.time})]})]})]})},e.id))})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"card p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-navy mb-4 flex items-center gap-2",children:"\uD83D\uDCE8 邀请链接生成"}),e?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("button",{onClick:_,className:"w-full btn btn-primary btn-sm",children:"生成邀请链接"}),N&&(0,s.jsxs)("div",{className:"p-3 bg-gold/5 border border-gold/20 rounded-lg",children:[(0,s.jsx)("div",{className:"text-xs text-gray-500 mb-2",children:"您的邀请链接："}),(0,s.jsx)("div",{className:"text-xs font-mono bg-white p-2 rounded border break-all",children:N}),(0,s.jsx)("button",{onClick:()=>{N&&(navigator.clipboard.writeText(N),alert("邀请链接已复制到剪贴板！"))},className:"w-full mt-2 btn btn-ghost btn-sm",children:"复制链接"})]}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"邀请好友加入LAC，共同学习成长！"})]}):(0,s.jsxs)("div",{className:"text-center py-4",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500 mb-2",children:"请先登录"}),(0,s.jsx)("div",{className:"text-xs text-gray-400",children:"登录后可生成专属邀请链接"})]})]}),(0,s.jsxs)("div",{className:"card p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-navy mb-4 flex items-center gap-2",children:"\uD83D\uDD34 正在直播"}),(0,s.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-red-400 to-red-600 flex items-center justify-center text-white text-lg flex-shrink-0",children:"\uD83E\uDD16"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"font-semibold text-navy mb-1",children:"AITeacher"}),(0,s.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"《ChatGPT高级Prompt技巧》"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,s.jsx)("span",{className:"bg-red-500 text-white px-2 py-0.5 rounded-full animate-pulse",children:"直播中"}),(0,s.jsx)("span",{className:"text-red-600 font-medium",children:"342人观看"})]})]})]})})]}),(0,s.jsxs)("div",{className:"card p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-navy mb-4",children:"我的教学"}),(0,s.jsx)("div",{className:"space-y-3",children:x.map(e=>(0,s.jsx)("button",{onClick:()=>j(e),className:"w-full text-left px-4 py-3 rounded-xl transition-all duration-200 ".concat(f===e?"bg-navy text-white":"bg-surface text-gray-600 hover:bg-gold-pale"),children:e},e))}),(0,s.jsx)("div",{className:"mt-6 pt-6 border-t border-[#E8EAF0]",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xl font-bold text-navy",children:"12"}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"发布教程"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-xl font-bold text-gold",children:"1,234"}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"获得打赏"})]})]})})]})]})]})})}),S&&(0,s.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-navy",children:"\uD83D\uDCDD 提交内容"}),(0,s.jsx)("button",{onClick:()=>w(!1),className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center text-gray-500 hover:bg-gray-200",children:"✕"})]}),(0,s.jsxs)("form",{onSubmit:T,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-navy mb-2",children:"标题"}),(0,s.jsx)("input",{type:"text",name:"title",value:O.title,onChange:D,required:!0,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:border-gold",placeholder:"请输入内容标题"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-navy mb-2",children:"内容"}),(0,s.jsx)("textarea",{name:"content",value:O.content,onChange:D,required:!0,rows:8,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:border-gold resize-none",placeholder:"请输入内容详情..."})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-navy mb-2",children:"类型"}),(0,s.jsxs)("select",{name:"type",value:O.type,onChange:D,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:border-gold",children:[(0,s.jsx)("option",{value:"tutorial",children:"图文教程"}),(0,s.jsx)("option",{value:"video",children:"视频教程"}),(0,s.jsx)("option",{value:"live",children:"直播教学"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-navy mb-2",children:"分类"}),(0,s.jsxs)("select",{name:"category",value:O.category,onChange:D,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:border-gold",children:[(0,s.jsx)("option",{value:"ai",children:"AI技术"}),(0,s.jsx)("option",{value:"web3",children:"Web3"}),(0,s.jsx)("option",{value:"dev",children:"编程开发"}),(0,s.jsx)("option",{value:"design",children:"设计"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-navy mb-2",children:"难度"}),(0,s.jsxs)("select",{name:"difficulty",value:O.difficulty,onChange:D,className:"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:border-gold",children:[(0,s.jsx)("option",{value:"beginner",children:"入门"}),(0,s.jsx)("option",{value:"intermediate",children:"进阶"}),(0,s.jsx)("option",{value:"advanced",children:"高级"})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>w(!1),className:"flex-1 btn btn-ghost",children:"取消"}),(0,s.jsx)("button",{type:"submit",className:"flex-1 btn btn-primary",children:"提交内容"})]})]})]})})]})}},5419:(e,t,a)=>{Promise.resolve().then(a.bind(a,3815))},6707:(e,t,a)=>{"use strict";a.d(t,{A:()=>n,AuthProvider:()=>r});var s=a(5155),i=a(2115);let l=(0,i.createContext)(void 0),n=()=>{let e=(0,i.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},r=e=>{let{children:t}=e,[a,n]=(0,i.useState)(!1),[r,c]=(0,i.useState)(""),[o,d]=(0,i.useState)(null),[m,x]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{(async()=>{let e=localStorage.getItem("lac_token");if(!e)return x(!1);try{let t=await fetch("".concat("https://ygfprjmevukjzwaqlblf.supabase.co","/functions/v1/user-profile"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){let a=await t.json();n(!0),c(a.username||"用户"),d(e)}else localStorage.removeItem("lac_token"),n(!1)}catch(e){n(!1)}finally{x(!1)}})()},[]),(0,s.jsx)(l.Provider,{value:{isLoggedIn:a,username:r,token:o,login:(e,t)=>{localStorage.setItem("lac_token",e),d(e),c(t),n(!0)},logout:()=>{localStorage.removeItem("lac_token"),d(null),c(""),n(!1)},loading:m},children:t})}},7621:(e,t,a)=>{"use strict";a.d(t,{H1:()=>c,KX:()=>x,LQ:()=>o,Ne:()=>r,Qn:()=>d,SO:()=>u,_O:()=>n,is:()=>y,mi:()=>l,vI:()=>h,zV:()=>m});let s={baseUrl:"https://ygfprjmevukjzwaqlblf.supabase.co",anonKey:"sb_publishable_rQWUHvRwwslnMTy_l3ry8Q_M9V47mD3"},i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat(s.baseUrl,"/functions/v1/").concat(e),i={headers:{"Content-Type":"application/json",apikey:s.anonKey||"",...t.headers},...t},l=await fetch(a,i);if(!l.ok)throw Error("API call failed: ".concat(l.status," ").concat(l.statusText));return l.json()},l={async getLeaderboard(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"checkin",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return i("leaderboard?type=".concat(e,"&limit=").concat(t))}},n={async list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return i("community-qa",{method:"POST",body:JSON.stringify({action:"list",limit:e})})},create:async e=>i("community-qa",{method:"POST",body:JSON.stringify({action:"create",...e})}),answer:async(e,t)=>i("community-qa",{method:"POST",body:JSON.stringify({action:"answer",question_id:e,answer:t})})},r={async list(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return i("prompt-market",{method:"POST",body:JSON.stringify({action:"list",page:e,limit:t})})},detail:async e=>i("prompt-market",{method:"POST",body:JSON.stringify({action:"detail",template_id:e})}),submit:async e=>i("prompt-market",{method:"POST",body:JSON.stringify({action:"submit",...e})}),purchase:async e=>i("prompt-market",{method:"POST",body:JSON.stringify({action:"purchase",template_id:e})})},c={getProfile:async e=>i("user-profile",{headers:{Authorization:"Bearer ".concat(e)}}),updateProfile:async(e,t)=>i("user-profile",{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:JSON.stringify(t)})},o={getStats:async e=>i("invite-system",{method:"POST",body:JSON.stringify({action:"stats",user_id:e})}),generate:async e=>i("invite-system",{method:"POST",body:JSON.stringify({action:"generate",user_id:e})}),getInviteCode:async e=>i("invite-system",{method:"POST",body:JSON.stringify({action:"get_code",user_id:e})})},d={list:async e=>i("achievement-unlock",{method:"POST",body:JSON.stringify({action:"list",user_id:e})}),unlock:async(e,t)=>i("achievement-unlock",{method:"POST",body:JSON.stringify({action:"unlock",user_id:e,achievement_id:t})})},m={donate:async(e,t,a)=>i("charity-donate",{method:"POST",body:JSON.stringify({action:"donate",token:e,project_id:t,amount:a})}),history:async e=>i("charity-donate",{method:"POST",body:JSON.stringify({action:"history",token:e})}),listProjects:async()=>i("charity-project",{method:"POST",body:JSON.stringify({action:"list"})}),projectDetail:async e=>i("charity-project",{method:"POST",body:JSON.stringify({action:"detail",project_id:e})})},x={submit:async e=>i("content-submit",{method:"POST",body:JSON.stringify({action:"submit",...e})}),list:async e=>i("content-submit",{method:"POST",body:JSON.stringify({action:"list",user_id:e})})},u={checkin:async e=>i("mining-checkin",{method:"POST",body:JSON.stringify({action:"checkin",token:e})}),status:async e=>i("mining-checkin",{method:"POST",body:JSON.stringify({action:"status",token:e})}),streak:async e=>i("mining-streak-simple",{method:"POST",body:JSON.stringify({action:"status",token:e})})},h={complete:async(e,t)=>i("mining-learn",{method:"POST",body:JSON.stringify({action:"complete",token:e,course_id:t})})},y={getQuiz:async e=>i("quiz-system",{method:"POST",body:JSON.stringify({action:"get_quiz",course_id:e})}),submitQuiz:async(e,t,a)=>i("quiz-system",{method:"POST",body:JSON.stringify({action:"submit",token:e,course_id:t,answers:a})})}}},e=>{e.O(0,[441,493,358],()=>e(e.s=5419)),_N_E=e.O()}]);