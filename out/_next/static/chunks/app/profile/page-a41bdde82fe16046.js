(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{928:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var l=s(5155),a=s(2115),c=s(2619),n=s.n(c),r=s(6707),i=s(5955),d=s(4034),x=s(5223),o=s(7737);let m=[{icon:"\uD83C\uDF93",title:"学习先锋",desc:"完成首门课程",date:"2026-02-15"},{icon:"\uD83D\uDD25",title:"签到专家",desc:"连续签到7天",date:"2026-02-20"},{icon:"\uD83C\uDFC6",title:"LAC百元户",desc:"累计获得100 LAC",date:"2026-02-18"},{icon:"\uD83D\uDC51",title:"AI专家",desc:"达到Lv.5等级",date:"2026-02-19"}],h=[{type:"学习",course:"AI基础入门",amount:"+50",date:"2026-02-21"},{type:"签到",course:"每日签到",amount:"+10",date:"2026-02-21"},{type:"学习",course:"区块链入门",amount:"+80",date:"2026-02-20"},{type:"签到",course:"每日签到",amount:"+15",date:"2026-02-20"},{type:"教导",course:"DeFi答疑",amount:"+120",date:"2026-02-19"}];function u(){var e,t,s,c;let{isLoggedIn:u,token:g,logout:j,loading:v}=(0,r.A)(),{publicKey:b,connected:f}=(0,i.v)(),{connection:N}=(0,d.w)(),[p,y]=(0,a.useState)(null),[D,w]=(0,a.useState)(null),[C,k]=(0,a.useState)(!1),[S,A]=(0,a.useState)(!0),[_,E]=(0,a.useState)("");return((0,a.useEffect)(()=>{if(!u||!g)return void A(!1);(async()=>{try{let e=await fetch("".concat("https://ygfprjmevukjzwaqlblf.supabase.co","/functions/v1/user-profile"),{method:"GET",headers:{Authorization:"Bearer ".concat(g),"Content-Type":"application/json"}});if(e.ok){let t=await e.json();y(t)}else if(401===e.status)j();else throw Error("获取用户信息失败")}catch(e){E(e.message||"加载用户信息失败")}finally{A(!1)}})()},[u,g,j]),(0,a.useEffect)(()=>{f&&b?(async()=>{k(!0);try{let e=await N.getBalance(b);w(e/x.Sr)}catch(e){console.error("获取SOL余额失败:",e)}finally{k(!1)}})():w(null)},[f,b,N]),u)?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("section",{className:"pt-32 pb-16 lg:pb-20 bg-gradient-to-b from-white to-surface",children:(0,l.jsx)("div",{className:"max-w-[1200px] mx-auto px-6",children:(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row items-center gap-6",children:[(0,l.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-gold-pale to-gold/[0.15] border-4 border-gold-light flex items-center justify-center text-4xl",children:"\uD83E\uDDD1‍\uD83D\uDCBB"}),(0,l.jsx)("div",{className:"text-center sm:text-left",children:S?(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"h-10 bg-gray-200 rounded-lg mb-2 animate-pulse"}),(0,l.jsx)("div",{className:"h-6 bg-gray-200 rounded-lg animate-pulse"})]}):_?(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl lg:text-[40px] font-black text-navy leading-tight mb-2",children:"加载失败"}),(0,l.jsx)("div",{className:"text-sm text-red-500",children:_})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h1",{className:"text-3xl lg:text-[40px] font-black text-navy leading-tight mb-2",children:(null==p?void 0:p.username)||"LAC Explorer"}),(0,l.jsxs)("div",{className:"flex items-center gap-4 flex-wrap justify-center sm:justify-start",children:[(0,l.jsxs)("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 bg-gold/10 rounded-full text-sm font-semibold text-gold",children:["⭐ Lv.",(null==p?void 0:p.level)||1]}),(null==p?void 0:p.wallet)&&(0,l.jsxs)("span",{className:"text-sm text-gray-400",children:[p.wallet.slice(0,6),"...",p.wallet.slice(-4)]}),(0,l.jsxs)("span",{className:"text-sm text-gray-400",children:["加入于 ",(null==p?void 0:p.created_at)?new Date(p.created_at).toLocaleDateString():"2026-02-21"]}),(0,l.jsx)("button",{onClick:j,className:"text-sm text-red-500 hover:text-red-700",children:"退出登录"})]})]})})]})})}),(0,l.jsx)("section",{className:"py-12 lg:py-16",children:(0,l.jsx)("div",{className:"max-w-[1200px] mx-auto px-6",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,l.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,l.jsxs)("div",{className:"card p-8",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-navy",children:"\uD83D\uDD17 钱包连接"}),(0,l.jsx)(o.A,{size:"sm"})]}),f&&b?(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-green-100 flex items-center justify-center text-xl",children:"✅"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-semibold text-navy",children:(c=b.toString())?"".concat(c.slice(0,6),"...").concat(c.slice(-6)):""}),(0,l.jsx)("div",{className:"text-xs text-gray-500",children:"Solana钱包"}),(0,l.jsx)("button",{onClick:()=>navigator.clipboard.writeText(b.toString()),className:"text-xs text-gold hover:text-gold-light mt-1",children:"点击复制完整地址"})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-purple-100 flex items-center justify-center text-xl",children:"\uD83D\uDC8E"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-lg font-black text-navy",children:C?(0,l.jsx)("div",{className:"h-6 bg-gray-200 rounded animate-pulse"}):"".concat((null==D?void 0:D.toFixed(4))||"0.0000"," SOL")}),(0,l.jsx)("div",{className:"text-xs text-gray-500",children:"钱包余额"})]})]})]}):(0,l.jsxs)("div",{className:"text-center py-8",children:[(0,l.jsx)("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center text-3xl mx-auto mb-4",children:"\uD83D\uDC5B"}),(0,l.jsx)("h3",{className:"text-lg font-semibold text-navy mb-2",children:"未连接钱包"}),(0,l.jsx)("p",{className:"text-sm text-gray-500 mb-4 max-w-md mx-auto",children:"连接您的Solana钱包以查看余额和进行链上操作"}),(0,l.jsx)("div",{className:"text-xs text-gray-400",children:"支持 Phantom、Solflare、Backpack 等钱包"})]})]}),(0,l.jsxs)("div",{className:"card p-8",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-navy mb-6",children:"\uD83D\uDCB0 资产概览"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-6",children:[(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-3xl font-black gold-text mb-2",children:(null==p||null==(e=p.lac_balance)?void 0:e.toLocaleString())||"0"}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"总LAC余额"}),(0,l.jsx)("div",{className:"text-xs text-gray-400 mt-1",children:"数据库余额"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-3xl font-black text-navy mb-2",children:(null==p||null==(t=p.monthly_earned)?void 0:t.toLocaleString())||"0"}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"本月获得"})]}),(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("div",{className:"text-3xl font-black text-green-500 mb-2",children:(null==p?void 0:p.growth_rate)?"+".concat(p.growth_rate,"%"):"+0%"}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"月增长率"})]})]})]}),(0,l.jsxs)("div",{className:"card p-8",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-navy mb-6",children:"\uD83C\uDF93 学习成就"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-surface flex items-center justify-center text-xl",children:"\uD83D\uDCDA"}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"text-2xl font-black text-navy",children:[(null==p?void 0:p.completed_courses)||0,"/",(null==p?void 0:p.total_courses)||5]}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"已完成课程"})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-surface flex items-center justify-center text-xl",children:"⏱️"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-2xl font-black text-navy",children:(null==p?void 0:p.total_study_time)||0}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"学习总时长（分钟）"})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-surface flex items-center justify-center text-xl",children:"\uD83C\uDFC6"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-2xl font-black text-navy",children:(null==p?void 0:p.badges_count)||0}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"获得徽章"})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-4",children:[(0,l.jsx)("div",{className:"w-12 h-12 rounded-2xl bg-surface flex items-center justify-center text-xl",children:"\uD83D\uDCCA"}),(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"text-2xl font-black text-navy",children:["#",(null==p?void 0:p.rank)||"未排名"]}),(0,l.jsx)("div",{className:"text-sm text-gray-500",children:"学习排行榜"})]})]})]})]}),(0,l.jsxs)("div",{className:"card p-8",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-navy",children:"\uD83D\uDCB3 交易记录"}),(0,l.jsx)("button",{className:"text-sm text-gold hover:text-gold-light",children:"查看全部"})]}),(0,l.jsx)("div",{className:"space-y-3",children:h.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-[#E8EAF0] last:border-0",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center text-sm ".concat("学习"===e.type?"bg-blue-100 text-blue-600":"签到"===e.type?"bg-green-100 text-green-600":"bg-purple-100 text-purple-600"),children:"学习"===e.type?"\uD83D\uDCDA":"签到"===e.type?"✅":"\uD83D\uDCE3"}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-semibold text-navy",children:e.course}),(0,l.jsx)("div",{className:"text-xs text-gray-400",children:e.date})]})]}),(0,l.jsxs)("span",{className:"text-sm font-bold text-green-600",children:[e.amount," LAC"]})]},t))})]})]}),(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"card p-6",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-5",children:"\uD83D\uDCC5 签到统计"}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-gray-500",children:"\uD83D\uDD25 连续签到"}),(0,l.jsxs)("span",{className:"text-xl font-black text-navy",children:[(null==p?void 0:p.checkin_streak)||0," 天"]})]}),(0,l.jsx)("div",{className:"h-px bg-[#E8EAF0]"}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-gray-500",children:"\uD83D\uDCC5 本月已签到"}),(0,l.jsxs)("span",{className:"text-xl font-black text-navy",children:[(null==p?void 0:p.monthly_checkins)||0," 天"]})]}),(0,l.jsx)("div",{className:"h-px bg-[#E8EAF0]"}),(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{className:"text-sm text-gray-500",children:"\uD83D\uDCB0 签到收益"}),(0,l.jsxs)("span",{className:"text-xl font-black gold-text",children:[(null==p||null==(s=p.checkin_earnings)?void 0:s.toLocaleString())||"0"," LAC"]})]})]})]}),(0,l.jsxs)("div",{className:"card p-6",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-5",children:"\uD83C\uDFC6 成就徽章"}),(0,l.jsx)("div",{className:"space-y-3",children:m.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-start gap-3",children:[(0,l.jsx)("span",{className:"w-10 h-10 rounded-xl bg-gold/10 flex items-center justify-center text-lg flex-shrink-0",children:e.icon}),(0,l.jsxs)("div",{children:[(0,l.jsx)("div",{className:"text-sm font-semibold text-navy",children:e.title}),(0,l.jsx)("div",{className:"text-xs text-gray-400 mb-1",children:e.desc}),(0,l.jsx)("div",{className:"text-xs text-gray-300",children:e.date})]})]},t))})]}),(0,l.jsxs)("div",{className:"card p-6",children:[(0,l.jsx)("h3",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider mb-5",children:"⚡ 快捷操作"}),(0,l.jsxs)("div",{className:"space-y-3",children:[(0,l.jsx)("button",{className:"w-full btn btn-secondary btn-sm",children:"\uD83D\uDCDA 继续学习"}),(0,l.jsx)("button",{className:"w-full btn btn-secondary btn-sm",children:"✅ 每日签到"}),(0,l.jsx)("button",{className:"w-full btn btn-secondary btn-sm",children:"\uD83D\uDCB1 提现LAC"}),(0,l.jsx)("button",{className:"w-full btn btn-ghost btn-sm",children:"\uD83D\uDD27 设置"})]})]})]})]})})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("section",{className:"pt-32 pb-16 lg:pb-20 bg-gradient-to-b from-white to-surface",children:(0,l.jsxs)("div",{className:"max-w-[1200px] mx-auto px-6 text-center",children:[(0,l.jsx)("span",{className:"section-label justify-center",children:"Profile"}),(0,l.jsx)("h1",{className:"text-4xl lg:text-[56px] font-black text-navy leading-[1.1] mb-6 tracking-tight",children:"个人中心"}),(0,l.jsx)("p",{className:"text-lg text-gray-500 max-w-[680px] mx-auto leading-relaxed",children:"登录后查看你的学习进度和收益详情"})]})}),(0,l.jsx)("section",{className:"py-16 lg:py-24",children:(0,l.jsx)("div",{className:"max-w-[600px] mx-auto px-6",children:(0,l.jsxs)("div",{className:"card p-12 text-center",children:[(0,l.jsx)("div",{className:"w-24 h-24 rounded-full bg-surface flex items-center justify-center text-5xl mx-auto mb-6",children:"\uD83D\uDD12"}),(0,l.jsx)("h2",{className:"text-2xl font-bold text-navy mb-4",children:"需要先登录"}),(0,l.jsx)("p",{className:"text-gray-500 mb-8 leading-relaxed",children:"连接你的钱包或使用邮箱登录，开始你的LAC之旅"}),(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,l.jsx)(n(),{href:"/login",className:"btn btn-primary btn-lg",children:"✉️ 邮箱登录"}),(0,l.jsx)(n(),{href:"/register",className:"btn btn-secondary btn-lg",children:"\uD83D\uDC4B 立即注册"})]}),(0,l.jsx)("div",{className:"text-xs text-gray-400 mt-6",children:"支持 MetaMask、Phantom、WalletConnect 等主流钱包"})]})})})]})}},1587:(e,t,s)=>{Promise.resolve().then(s.bind(s,928))},6707:(e,t,s)=>{"use strict";s.d(t,{A:()=>n,AuthProvider:()=>r});var l=s(5155),a=s(2115);let c=(0,a.createContext)(void 0),n=()=>{let e=(0,a.useContext)(c);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},r=e=>{let{children:t}=e,[s,n]=(0,a.useState)(!1),[r,i]=(0,a.useState)(""),[d,x]=(0,a.useState)(null),[o,m]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{let e=localStorage.getItem("lac_token");if(!e)return m(!1);try{let t=await fetch("".concat("https://ygfprjmevukjzwaqlblf.supabase.co","/functions/v1/user-profile"),{method:"GET",headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});if(t.ok){let s=await t.json();n(!0),i(s.username||"用户"),x(e)}else localStorage.removeItem("lac_token"),n(!1)}catch(e){n(!1)}finally{m(!1)}})()},[]),(0,l.jsx)(c.Provider,{value:{isLoggedIn:s,username:r,token:d,login:(e,t)=>{localStorage.setItem("lac_token",e),x(e),i(t),n(!0)},logout:()=>{localStorage.removeItem("lac_token"),x(null),i(""),n(!1)},loading:o},children:t})}},7737:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var l=s(5155),a=s(5955),c=s(8183),n=s(2115);function r(e){let{className:t="",size:s="md"}=e,{publicKey:r,connecting:i,connected:d,disconnect:x}=(0,a.v)(),{visible:o,setVisible:m}=(0,c.o)(),[h,u]=(0,n.useState)(!1),g=e=>e?"".concat(e.slice(0,4),"...").concat(e.slice(-4)):"",j={sm:"btn-sm",md:"btn-md",lg:"btn-lg"};return i?(0,l.jsxs)("button",{disabled:!0,className:"btn btn-primary ".concat(j[s]," ").concat(t),children:[(0,l.jsx)("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"连接中..."]}):(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("button",{onClick:()=>{d&&r?u(!h):m(!0)},className:"btn ".concat(d?"btn-secondary border-gold text-gold hover:bg-gold hover:text-white":"btn-primary"," ").concat(j[s]," ").concat(t),children:d&&r?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full"}),g(r.toString())]}):(0,l.jsx)(l.Fragment,{children:"\uD83D\uDCB0 连接钱包"})}),h&&d&&(0,l.jsxs)("div",{className:"absolute top-full right-0 mt-2 w-48 bg-white rounded-xl shadow-lg border border-gray-100 py-2 z-50",children:[(0,l.jsx)("div",{className:"px-4 py-2 text-sm text-gray-500 border-b border-gray-100",children:r&&g(r.toString())}),(0,l.jsx)("button",{onClick:()=>{navigator.clipboard.writeText((null==r?void 0:r.toString())||""),u(!1)},className:"w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-50",children:"\uD83D\uDCCB 复制地址"}),(0,l.jsx)("button",{onClick:()=>{x(),u(!1)},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50",children:"\uD83D\uDD0C 断开连接"})]}),h&&(0,l.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>u(!1)})]})}},7790:()=>{}},e=>{e.O(0,[956,619,29,287,441,493,358],()=>e(e.s=1587)),_N_E=e.O()}]);